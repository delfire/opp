<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Object Pascal Programming</title>
    <description>Sacadas sobre Programação Orientada a Objetos e Object Pascal.
</description>
    <link>http://objectpascalprogramming.com/</link>
    <atom:link href="http://objectpascalprogramming.com/feed.xml" rel="self" type="application/rss+xml" />
    
      <item>
        <title>Objetos Validadores</title>
        <description>&lt;p&gt;Veja como fazer validações utilizando Objetos ao invés de utilizar programação procedural.&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;&lt;img src=&quot;/images/2017/photo-scott-webb-59043.jpg&quot; alt=&quot;Unsplash image&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;introducao&quot;&gt;Introdução&lt;/h2&gt;

&lt;p&gt;Na Orientação a Objetos a codificação deve ser declarativa. Isso quer dizer que, num mundo ideal, iríamos criar os Objetos agrupando-os entre si e, com uma única &lt;a href=&quot;/posts/diga-me-algo-sobre-voce/#mensagens&quot;&gt;mensagem&lt;/a&gt;, o trabalho a ser realizado seria iniciado e cada Objeto iria realizar parte desse trabalho. Tudo em perfeita harmonia.&lt;/p&gt;

&lt;p&gt;No entanto, não vivemos num mundo ideal e problemas podem ocorrer.&lt;/p&gt;

&lt;p&gt;Se pudermos validar o &lt;em&gt;input&lt;/em&gt; dos dados no nosso sistema antes de iniciar um processo mais elaborado, isso tornaria o processamento menos custoso, menos demorado e menos propenso a erros.&lt;/p&gt;

&lt;p&gt;No entanto, se devemos codificar de forma declarativa, ou seja, sem condicionais que validem passo-a-passo o que está sendo processado — o &lt;em&gt;modus operandis&lt;/em&gt; da programação procedural — como seria possível fazer isso utilizando Objetos para deixar o código mais seguro e fazer um tratamento mais adequado para cada problema ou decisão, antes que uma exceção possa ocorrer?&lt;/p&gt;

&lt;h2 id=&quot;validacoes&quot;&gt;Validações&lt;/h2&gt;

&lt;p&gt;Imagine um Formulário onde há diversos campos para o usuário preencher antes de clicar em algum botão que irá fazer algo com os dados preenchidos nos &lt;em&gt;widgets&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;Sempre temos que validar o &lt;em&gt;input&lt;/em&gt; antes de processá-lo, certo?&lt;/p&gt;

&lt;p&gt;Tenho trabalhado com desenvolvimento de &lt;em&gt;software&lt;/em&gt; a muitos anos. Grande parte desse tempo eu codifiquei a validação de campos utilizando o mesmo “padrão” que até hoje é utilizado, independentemente da linguagem utilizada.&lt;/p&gt;

&lt;p&gt;Vejamos como é esse padrão:&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/mdbs99/1d990d474d0a15a7543c54c5c02b370a.js&quot;&gt;&lt;/script&gt;

&lt;p&gt;O exemplo acima é sobre um Formulário que contém alguns campos, dentre esses campos temos &lt;code&gt;Name&lt;/code&gt; e &lt;code&gt;Birthday&lt;/code&gt;. O primeiro é &lt;em&gt;string&lt;/em&gt; e não pode estar em branco. Já o segundo deveria ser uma data válida, então o código utiliza a função padrão &lt;code&gt;SysUtils.TryStrToDate&lt;/code&gt; que verifica se é uma data válida e retorna o valor na variável &lt;code&gt;MyDate&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Quem nunca fez isso?&lt;/p&gt;

&lt;p&gt;Pois é.&lt;/p&gt;

&lt;p&gt;Há problemas demais com essa abordagem:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Não podemos reutilizar as validações. Em cada Formulário haverá uma possível cópia do mesmo código;&lt;/li&gt;
  &lt;li&gt;As variáveis locais podem aumentar consideravelmente caso haja mais testes que necessitem de variáveis;&lt;/li&gt;
  &lt;li&gt;O código é totalmente procedural;&lt;/li&gt;
  &lt;li&gt;Não posso utilizar as informações de aviso ao usuário em outra aplicação Web, por exemplo, visto que as &lt;em&gt;strings&lt;/em&gt; estão codificadas dentro de funções &lt;code&gt;ShowMessage&lt;/code&gt; (ou qualquer outra função de mensagem para Desktop);&lt;/li&gt;
  &lt;li&gt;O Formulário ficou complexo, visto que há muito código num único evento — e não adianta apenas criar vários métodos privados para cada teste, pois o Formulário irá continuar fazendo coisas demais.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Há variantes dessa abordagem acima, porém acredito que todos nós já vimos algo assim ou mesmo estamos codificando dessa maneira ainda hoje.&lt;/p&gt;

&lt;p&gt;O que podemos fazer para simplificar o código, obter a reutilização das validações e ainda codificar utilizando Orientação a Objetos?&lt;/p&gt;

&lt;h2 id=&quot;constraints&quot;&gt;Constraints&lt;/h2&gt;

&lt;p&gt;&lt;em&gt;Constraints&lt;/em&gt; são Objetos que tem por função a validação de algum dado ou mesmo a validação de outro Objeto.&lt;/p&gt;

&lt;p&gt;Cada &lt;em&gt;constraint&lt;/em&gt; valida apenas 1 artefato. Assim podemos reutilizar a validação em muitos outros lugares.&lt;/p&gt;

&lt;p&gt;Vamos definir algumas &lt;a href=&quot;/posts/interfaces-em-todo-lugar/&quot;&gt;Interfaces&lt;/a&gt;:&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/mdbs99/c668747123d651298e9f40d0e10af5b4.js&quot;&gt;&lt;/script&gt;

&lt;p&gt;Vamos entender cada Interface:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;code&gt;[guids]&lt;/code&gt;: São necessários para &lt;em&gt;casting&lt;/em&gt; de Interfaces.&lt;/li&gt;
  &lt;li&gt;&lt;code&gt;IDataInformation&lt;/code&gt;: Representa uma infomação.&lt;/li&gt;
  &lt;li&gt;&lt;code&gt;IDataInformations&lt;/code&gt;: Representa uma lista de informações.&lt;/li&gt;
  &lt;li&gt;&lt;code&gt;IDataResult&lt;/code&gt;: Representa um resultado de uma restrição.&lt;/li&gt;
  &lt;li&gt;&lt;code&gt;IDataConstraint&lt;/code&gt;: Representa uma restrição.&lt;/li&gt;
  &lt;li&gt;&lt;code&gt;IDataConstraints&lt;/code&gt;: Representa uma lista de restrições.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Não estou utilizando &lt;em&gt;Generics&lt;/em&gt;. Apenas Classes que podem ser reescritas em praticamente qualquer versão do Lazarus ou Delphi.&lt;/p&gt;

&lt;p&gt;Bem simples.&lt;/p&gt;

&lt;p&gt;Agora veremos a implementação das Interfaces — por questões de breviedade, vou apresentar somente as assinaturas das Classes:&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/mdbs99/b254ff882ce27ce9fa4e8219c63e3e96.js&quot;&gt;&lt;/script&gt;

&lt;p&gt;Essas são Classes utilizadas em projetos reais. Em breve todo o código estará disponível no &lt;a href=&quot;https://github.com/mdbs99/james&quot;&gt;Projeto James&lt;/a&gt;. Você poderá obter esse código acompanhando a &lt;a href=&quot;https://github.com/mdbs99/james/issues/17&quot;&gt;Issue #17&lt;/a&gt; do mesmo projeto.&lt;/p&gt;

&lt;p&gt;Na implementação acima não tem nenhuma Classe que implemente a Interface &lt;code&gt;IDataConstraint&lt;/code&gt;. O motivo disso é que você, programador, irá criar suas próprias &lt;em&gt;constraints&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;Vejamos um exemplo de como reescrever o código procedural do primeiro exemplo.&lt;/p&gt;

&lt;p&gt;Precisamos criar duas Classes que implementam &lt;code&gt;IDataConstraint&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Como só há apenas 1 método nessa Interface, e para não deixar esse artigo ainda maior, vou mostrar o código de apenas uma implementação:&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/mdbs99/62040307d41fbc45c0f15605acc541b5.js&quot;&gt;&lt;/script&gt;

&lt;p&gt;O código acima mostra como seria a implementação para a &lt;em&gt;constraint&lt;/em&gt; &lt;code&gt;TNameConstraint&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;O código está &lt;em&gt;procedural&lt;/em&gt; e ainda pode &lt;em&gt;melhorar&lt;/em&gt; muito. As variáveis locais poderiam ser retiradas, bastando adicionar mais um &lt;em&gt;overload&lt;/em&gt; do método &lt;code&gt;New&lt;/code&gt; na Classe &lt;code&gt;TDataResult&lt;/code&gt; — você consegue ver essa possibilidade? Conseguiria implementá-la?&lt;/p&gt;

&lt;p&gt;Abaixo o código de como utilizar todos esses Objetos em conjunto:&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/mdbs99/5dc64c57916d86d01de561077d831aaf.js&quot;&gt;&lt;/script&gt;

&lt;p&gt;Se nas validações acima o nome estivesse &lt;em&gt;em branco&lt;/em&gt; mas a data de aniverário tivesse sido digitada &lt;em&gt;corretamente&lt;/em&gt; — o resultado do método &lt;code&gt;OK&lt;/code&gt; será verdadeiro se apenas todas as validações passarem no teste — o resultado do &lt;code&gt;ShowMessage&lt;/code&gt; poderia ser:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;- Name: Name is empty
- Birthday: OK
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Essa seria apenas uma versão da implementação de como mostrar as informações. Poderia haver muitos outros &lt;em&gt;decoradores&lt;/em&gt; para mostrar a informação em outros formatos como, por exemplo, HTML numa aplicação Web.&lt;/p&gt;

&lt;h2 id=&quot;conclusao&quot;&gt;Conclusão&lt;/h2&gt;

&lt;p&gt;O código não está completo, mas acredito que posso ter aberto sua mente a novas possibilidades quando se trata de validações.&lt;/p&gt;

&lt;p&gt;O resultado final de &lt;code&gt;SaveButtonClick&lt;/code&gt;, mesmo utilizando a Classe &lt;code&gt;TDataConstraints&lt;/code&gt;, também não foi implementada complemente seguindo o paradigma da Orientação a Objetos — para deixar o código mais sucinto — pois tem um &lt;code&gt;IF&lt;/code&gt; lá que não deixa o código tão elegante quanto deveria, mas eu acho que dá para você visualizar as possibilidades de uso.&lt;/p&gt;

&lt;p&gt;A instância de &lt;code&gt;TDataConstraints&lt;/code&gt; e seus itens poderia ser utilizada em muitos outros lugares do código.&lt;/p&gt;

&lt;p&gt;A combinação de tais Objetos é virtualmente infinita e seu será o mesmo em &lt;em&gt;todo&lt;/em&gt; código.&lt;/p&gt;

&lt;p&gt;O código é &lt;em&gt;reutilizável&lt;/em&gt; em qualquer tipo de aplicação.&lt;/p&gt;

&lt;p&gt;Nenhuma informação ou mensagem ao usuário seria duplicada no código. Haverá apenas um &lt;em&gt;único&lt;/em&gt; lugar, uma única Classe, para fazer a manutenção de cada validação.&lt;/p&gt;

&lt;p&gt;E a exibição da mensagem poderia ser em qualquer formato, bastando utilizar outros Objetos &lt;em&gt;decoradores&lt;/em&gt; para ler as &lt;em&gt;informations&lt;/em&gt;, formatando como quiser.&lt;/p&gt;

&lt;p&gt;Até logo.&lt;/p&gt;
</description>
        <pubDate>Mon, 03 Jul 2017 00:00:00 +0100</pubDate>
        <link>http://objectpascalprogramming.com/objetos-validadores</link>
        <guid isPermaLink="true">http://objectpascalprogramming.com/objetos-validadores</guid>
      </item>
    
      <item>
        <title>Atributos Não Existem</title>
        <description>&lt;p&gt;E se eu lhe dissesse que Atributos não existem realmente?&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;&lt;img src=&quot;/images/2017/photo-guillaume-bolduc-259596.jpg&quot; alt=&quot;Unsplash image&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Tive um &lt;em&gt;insight&lt;/em&gt; um dia desses:&lt;/p&gt;

&lt;p&gt;&lt;em&gt;“Não existem Atributos, apenas Composição e Comportamento”&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;O que chamamos de &lt;a href=&quot;/posts/menos-e-mais/#atributos&quot;&gt;Atributo&lt;/a&gt; é, na verdade, Composição de Objetos e &lt;a href=&quot;/posts/objetos-pensam-e-tomam-decisoes/&quot;&gt;Comportamento&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Atributos &lt;em&gt;não&lt;/em&gt; existem. São virtuais, produtos de nossa imaginação ou apenas uma abstração da realidade.&lt;/p&gt;

&lt;p&gt;Veja as Cores, por exemplo.&lt;/p&gt;

&lt;p&gt;Não existe atributos de cor Amarelo, Vermelho ou Azul. São todos Objetos!&lt;/p&gt;

&lt;p&gt;O Amarelo é um Objeto numa composição &lt;em&gt;RGB&lt;/em&gt; e nosso olho processa essa composição interagindo com outro Objeto, a &lt;em&gt;Luz&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;Assim “vemos” as cores.&lt;/p&gt;

&lt;p&gt;Quer outros exemplos?&lt;/p&gt;

&lt;p&gt;A quantidade de itens numa lista é determinada pelo comportamento do Objeto ao contar os itens da lista.&lt;/p&gt;

&lt;p&gt;A idade de uma pessoa é determinada pelo comportamento do Objeto ao contar o tempo.&lt;/p&gt;

&lt;p&gt;Não há nada de errado em continuarmos utilizando a palavra Atributo, mas não se esqueça que eles não existem. São apenas abstrações da realidade.&lt;/p&gt;

&lt;p&gt;Faz sentido?&lt;/p&gt;
</description>
        <pubDate>Mon, 26 Jun 2017 00:00:00 +0100</pubDate>
        <link>http://objectpascalprogramming.com/atributos-nao-existem</link>
        <guid isPermaLink="true">http://objectpascalprogramming.com/atributos-nao-existem</guid>
      </item>
    
      <item>
        <title>Mutabilidade Encapsulada</title>
        <description>&lt;p&gt;Um Objeto pode mudar internamente, mas permanecer imutável para o mundo exterior.&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;&lt;img src=&quot;/images/2017/photo-ben-white-197668.jpg&quot; alt=&quot;Unsplash image&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;introducao&quot;&gt;Introdução&lt;/h2&gt;

&lt;p&gt;Uma das atribuições da Orientação a Objetos é &lt;em&gt;gerenciar&lt;/em&gt; a mutabilidade.&lt;/p&gt;

&lt;p&gt;Então foi criado o conceito de atributos privados, onde o acesso a esses atributos não seria permitido ou só seria permitido através de &lt;a href=&quot;/posts/getters-e-setters/&quot;&gt;métodos públicos&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;O gerenciamento da mutabilidade nos proporcionou um código mais seguro, melhorando a munutenabilidade.&lt;/p&gt;

&lt;p&gt;Entretanto, Objetos Mutáveis são os opostos dos &lt;a href=&quot;/posts/objetos-imutaveis/&quot;&gt;Objetos Imutáveis&lt;/a&gt;. Esses últimos são mais &lt;em&gt;simples&lt;/em&gt; de usar e ainda &lt;em&gt;mais seguros&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;Mas nem sempre conseguimos — ou queremos — codificar um Objeto &lt;em&gt;completamente&lt;/em&gt; imutável. Seja por questão de performance, &lt;em&gt;design&lt;/em&gt; ou restrição tecnológica.&lt;/p&gt;

&lt;p&gt;Esse artigo irá lhe mostrar que podemos ter um Objeto &lt;em&gt;imutável&lt;/em&gt; para o mundo externo, mesmo ele sendo &lt;em&gt;mutável&lt;/em&gt; internamente.&lt;/p&gt;

&lt;h2 id=&quot;mutabilidade&quot;&gt;Mutabilidade&lt;/h2&gt;

&lt;p&gt;Na Orientação a Objetos, toda mutabilidade deve ser controlada.&lt;/p&gt;

&lt;p&gt;Nenhum atributo deve estar disponível para alteração de forma direta. Devemos, sempre, prover uma restrição com a máxima segurança aos atributos de um Objeto.&lt;/p&gt;

&lt;p&gt;A maioria das linguagens com suporte a Orientação a Objetos já faz isso por padrão. Basta declararmos os atributos como &lt;code&gt;private&lt;/code&gt; para que eles não sejam vistos fora do escopo do Objeto.&lt;/p&gt;

&lt;p&gt;Infelizmente, o uso das &lt;a href=&quot;https://en.wikipedia.org/wiki/Reflection_(computer_programming)&quot;&gt;técnicas de reflexão&lt;/a&gt; acabaram com essa segurança, nos levando de volta aos tempos da programação procedural e variáveis globais, onde tudo está acessível a todos… mas, nesse artigo, vamos fingir que isso não existe. 
Voltemos aos atributos e a mutabilidade.&lt;/p&gt;

&lt;p&gt;Não me refiro aos atributos que fazem parte do &lt;a href=&quot;/estado-do-objeto&quot;&gt;Estado&lt;/a&gt; do Objeto, pois esses não deveriam ser violados.&lt;/p&gt;

&lt;p&gt;A mutabilidade estará em algo que chamo de &lt;a href=&quot;/atributos-primarios-secundarios#secundario&quot;&gt;atributos secundários&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Esses tipo de atributo não faz parte do Estado do Objeto.
Então &lt;em&gt;ninguém&lt;/em&gt;, além do próprio Objeto, sabe de sua existência.&lt;/p&gt;

&lt;p&gt;Vejamos o mesmo exemplo do &lt;a href=&quot;/atributos-primarios-secundarios#secundario&quot;&gt;artigo anterior&lt;/a&gt;:&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/mdbs99/48237c902271b6f2c3a314d3b6f5b8c0.js&quot;&gt;&lt;/script&gt;

&lt;p&gt;O atributo &lt;code&gt;FStream&lt;/code&gt; não faz parte do Estado do Objeto. Esse atributo foi criado pensando na performance, ou seja, toda vez que o método &lt;code&gt;TFile.Stream&lt;/code&gt; for chamado, apenas na primeira vez o &lt;em&gt;stream&lt;/em&gt; do arquivo será lido em disco.&lt;/p&gt;

&lt;p&gt;É um atributo secundário.&lt;/p&gt;

&lt;p&gt;Mas algo muito importante deve ficar claro:
Poderíamos &lt;em&gt;remover&lt;/em&gt; esse atributo.&lt;/p&gt;

&lt;p&gt;Para o Objeto exercer seu &lt;a href=&quot;/posts/interfaces-em-todo-lugar/#interfaces-sao-contratos&quot;&gt;contrato&lt;/a&gt;, ele não é necessário!&lt;/p&gt;

&lt;p&gt;A implementação do Método poderia ser apenas isso:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;function TFile.Stream: IDataStream;
begin
  Result := TDataStream.New(FFileName);
end;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;O Objeto continuaria funcionando, no entanto teríamos o “problema” da performance.&lt;/p&gt;

&lt;p&gt;Então o programador opta por implementar algo interno ao Objeto. Algo que pode ser alterado a qualquer momento, sem impacto na manutenção do código externo ao Objeto.&lt;/p&gt;

&lt;h2 id=&quot;conclusao&quot;&gt;Conclusão&lt;/h2&gt;

&lt;p&gt;Vimos que não há problemas em termos atributos secundários mutáveis dentro de Objetos — se o Objeto souber gerenciá-los corretamente.&lt;/p&gt;

&lt;p&gt;O que acontece dentro de um Objeto, é segredo do Objeto.&lt;/p&gt;

&lt;p&gt;Então seria vantagem criar tais atributos? Depende.&lt;/p&gt;

&lt;p&gt;Haverá casos que é mais simples criar algo interno ao Objeto. Mas outras vezes, não.&lt;/p&gt;

&lt;p&gt;Você irá decidir com base nas Regras de Negócio, performance, simplicidade, &lt;em&gt;design&lt;/em&gt; das Classes… e prazo de entrega do seu software.&lt;/p&gt;

&lt;p&gt;Felizmente, como são atributos privados, você pode alterar o código qualquer momento.&lt;/p&gt;

&lt;p&gt;Então, não pense tanto sobre isso.&lt;/p&gt;

&lt;p&gt;Até logo.&lt;/p&gt;
</description>
        <pubDate>Mon, 19 Jun 2017 00:00:00 +0100</pubDate>
        <link>http://objectpascalprogramming.com/mutabilidade-encapsulada</link>
        <guid isPermaLink="true">http://objectpascalprogramming.com/mutabilidade-encapsulada</guid>
      </item>
    
      <item>
        <title>Atributos Primários e Secundários</title>
        <description>&lt;p&gt;Um Objeto pode ter Atributos Primários e Secundários.&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;&lt;img src=&quot;/images/2017/photo-tim-gouw-60216.jpg&quot; alt=&quot;Unsplash image&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;introducao&quot;&gt;Introdução&lt;/h2&gt;

&lt;p&gt;Os &lt;a href=&quot;/posts/menos-e-mais/#atributos&quot;&gt;atributos&lt;/a&gt; de um Objeto são a representação do seu conhecimento, ou seja, tudo que o Objeto &lt;a href=&quot;/posts/heranca-pode-ser-o-mal-da-orientacao-a-objetos-parte-2/#encapsulamento&quot;&gt;encapsula&lt;/a&gt; é representado por atributos.&lt;/p&gt;

&lt;p&gt;Assim como uma Classe pode ter 2 tipos de &lt;a href=&quot;/posts/construtores-da-classe-primario-secundarios/&quot;&gt;construtores&lt;/a&gt;, um Objeto pode ter 2 tipos de atributos: Primários e Secundários.&lt;/p&gt;

&lt;h2 id=&quot;primarios&quot;&gt;Primários&lt;/h2&gt;

&lt;p&gt;Atributos Primários são aqueles que fazem parte do &lt;a href=&quot;/estado-do-objeto&quot;&gt;Estado do Objeto&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;São os atributos inicializados pela Classe, passados ao Objeto através do construtor com a finalidade de representar uma &lt;a href=&quot;/posts/objetos-representam-entidades/#o-que-e-uma-entidade&quot;&gt;Entidade&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Vejamos um exemplo:&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/mdbs99/5952c6f39810803d91b05a6f1c4b8766.js&quot;&gt;&lt;/script&gt;

&lt;p&gt;Na Classe &lt;code&gt;TFile&lt;/code&gt; acima, há apenas 1 argumento no construtor. Esse argumento será parte do Estado do Objeto e, portanto, irá inicializar um Atributo Primário chamado &lt;code&gt;FFilePath&lt;/code&gt;.&lt;/p&gt;

&lt;h2 id=&quot;secundario&quot;&gt;Secundários&lt;/h2&gt;

&lt;p&gt;Atributos Secundários são todos os atributos que não foram inicializados pelo construtor da Classe.&lt;/p&gt;

&lt;p&gt;São atributos de &lt;em&gt;suporte tecnológico&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;Vejamos um exemplo:&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/mdbs99/48237c902271b6f2c3a314d3b6f5b8c0.js&quot;&gt;&lt;/script&gt;

&lt;p&gt;Nesse exemplo acima a Classe &lt;code&gt;TFile&lt;/code&gt; foi atualizada. Um novo atributo &lt;code&gt;FStream&lt;/code&gt; foi adicionado.&lt;/p&gt;

&lt;p&gt;Esse atributo não foi passado no construtor, então ele é um Atributo Secundário.&lt;/p&gt;

&lt;p&gt;O método &lt;code&gt;Stream&lt;/code&gt; irá retornar o &lt;em&gt;stream&lt;/em&gt; do arquivo, no entanto os dados do arquivo em disco serão lidos apenas na primeira execução, pois após inicializar o atributo &lt;code&gt;FStream&lt;/code&gt; ele não é mais atualizado.&lt;/p&gt;

&lt;p&gt;A Classe &lt;code&gt;TDataStream&lt;/code&gt; é irrelevante para o entendimento, mas veja que o &lt;em&gt;path&lt;/em&gt; do arquivo é passado. Então essa Classe irá ler o arquivo em disco e retornar uma instância de &lt;code&gt;IDataStream&lt;/code&gt;.&lt;/p&gt;

&lt;h2 id=&quot;conclusao&quot;&gt;Conclusão&lt;/h2&gt;

&lt;p&gt;Atributos Primários são inicializados através do construtor da Classe e &lt;em&gt;devem&lt;/em&gt; ser &lt;a href=&quot;/posts/objetos-imutaveis/&quot;&gt;imutáveis&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Atributos Secundários podem ou não ser inicializados através do construtor da Classe, pois eles podem ser inicializados a qualquer momento e em qualquer lugar do Objeto.&lt;/p&gt;

&lt;p&gt;Tudo são atributos, mas saber essa diferença sutil entre Atributos Primários e Secundários é essencial para construírmos Classes melhores.&lt;/p&gt;

&lt;p&gt;Até logo.&lt;/p&gt;
</description>
        <pubDate>Mon, 12 Jun 2017 00:00:00 +0100</pubDate>
        <link>http://objectpascalprogramming.com/atributos-primarios-secundarios</link>
        <guid isPermaLink="true">http://objectpascalprogramming.com/atributos-primarios-secundarios</guid>
      </item>
    
      <item>
        <title>Estado do Objeto</title>
        <description>&lt;p&gt;Estado de um Objeto. Existem dois tipos. Entenda-os e torne-os invioláveis.&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;&lt;img src=&quot;/images/2017/photo-tim-evans-88330.jpg&quot; alt=&quot;Unsplash image&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;introducao&quot;&gt;Introdução&lt;/h2&gt;

&lt;p&gt;Venho escrevendo sobre Orientação a Objetos e já falei  várias vezes sobre o &lt;em&gt;Estado de um Objeto&lt;/em&gt;, mas nunca havia explicado o que exatamente isso significa.&lt;/p&gt;

&lt;p&gt;Saber esse conceito é primordial para o entendimento da verdadeira Orientação a Objetos.&lt;/p&gt;

&lt;h2 id=&quot;estado&quot;&gt;O que é Estado&lt;/h2&gt;

&lt;p&gt;Todo Objeto é composto de Estado e Comportamento.&lt;/p&gt;

&lt;p&gt;Enquanto o comportamento é o que o Objeto &lt;em&gt;faz&lt;/em&gt;, Estado é o que o Objeto &lt;em&gt;sabe&lt;/em&gt; sobre a &lt;a href=&quot;/posts/objetos-representam-entidades/&quot;&gt;Entidade&lt;/a&gt; que ele está representando dentro do &lt;em&gt;software&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;Todo Objeto tem um Estado, mesmo que você não saiba sobre ele.&lt;/p&gt;

&lt;p&gt;Existem basicamente dois tipos de Estado.&lt;/p&gt;

&lt;h2 id=&quot;implicito&quot;&gt;Estado Implícito&lt;/h2&gt;

&lt;p&gt;Todo Objeto tem ou &lt;a href=&quot;/posts/objetos-sem-estado/&quot;&gt;deveria&lt;/a&gt; ter um Estado. No entanto existem casos especiais onde um Estado inicial não faz sentido &lt;em&gt;tecnicamente&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;Um exemplo de um Objeto sem Estado inicial é uma Lista. Podemos inicializar a lista com um item, porém nem sempre esse será o caso. Na maioria das vezes queremos uma lista para depois ir adicionando itens. Então iniciamos a lista sem Estado aparente.&lt;/p&gt;

&lt;p&gt;Isso é fato se tivermos uma visão estritamente técnica. Mas quando essa lista for instânciada na memória do computador, seu Estado será inicializado. Em outras palavras, a área de memória que o Sistema Operacional concedeu ao Objeto será, também, o seu Estado.&lt;/p&gt;

&lt;p&gt;Pensando &lt;em&gt;filosoficamente&lt;/em&gt;, no
&lt;a href=&quot;/posts/construtores-da-classe-primario-secundarios/&quot;&gt;construtor&lt;/a&gt; de uma Classe Lista que é inicializada vazia, “sem estado”, seria passado o endereço de memória onde a lista iria residir na memória do computador. Porém construtores já fazem isso por padrão — encontram um endereço de memória disponível — então não há necessidade de sabermos endereços de memória e muito menos passá-los no construtor.&lt;/p&gt;

&lt;p&gt;Estados implícitos devem ser utilizados apenas para Objetos primários ou muito genéricos, como uma lista.&lt;/p&gt;

&lt;h2 id=&quot;explicito&quot;&gt;Estado Explícito&lt;/h2&gt;

&lt;p&gt;Argumentos nos &lt;a href=&quot;/posts/construtores-da-classe-primario-secundarios/&quot;&gt;construtores&lt;/a&gt; de Classes mostram a intenção do desenvolvedor em instanciar um Objeto com um Estado Explícito.&lt;/p&gt;

&lt;p&gt;No entanto tais argumentos podem ou não fazer parte do Estado do Objeto que queremos inicializar.&lt;/p&gt;

&lt;p&gt;É o Objeto que irá decidir o que utilizar no seu Estado.&lt;/p&gt;

&lt;p&gt;Por exemplo. Numa Classe &lt;code&gt;TSalary&lt;/code&gt;, que representa um salário de alguém, é esperado um argumento no construtor do tipo &lt;code&gt;IMoney&lt;/code&gt;, que é uma &lt;a href=&quot;/posts/interfaces-em-todo-lugar/&quot;&gt;Interface&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;A Classe &lt;code&gt;TSalary&lt;/code&gt; poderia ter um outro construtor secundário com um argumento do tipo &lt;code&gt;string&lt;/code&gt;. Porém sabemos que um &lt;em&gt;TSalary&lt;/em&gt; não é uma &lt;em&gt;string&lt;/em&gt; e seu Estado não pode ser inicializado com um valor que não seja um &lt;code&gt;IMoney&lt;/code&gt;. Então porque esse construtor existe?&lt;/p&gt;

&lt;p&gt;Um exemplo de implementação desses construtores poderia ser assim:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;// primary
construtor TSalary.Create(Value: IMoney);
begin
  FValue := Value;
end;

// secondary
construtor TSalary.Create(const Value: string);
begin
  Create(TStringAsMoney.New(Value));
end;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;No exemplo acima o construtor secundário chama o primário com o argumento correto, do tipo &lt;code&gt;IMoney&lt;/code&gt;, porém outro Objeto é utilizado. O argumento &lt;code&gt;Value&lt;/code&gt; do tipo &lt;em&gt;string&lt;/em&gt; não faz parte do estado de &lt;code&gt;TSalary&lt;/code&gt; porém faz parte do estado de &lt;code&gt;TStringAsMoney&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Como eu disse antes, o Objeto que decide.&lt;/p&gt;

&lt;p&gt;Estados explícitos devem ser utilizados em todos os Objetos de alto nível e de regras de negócio.&lt;/p&gt;

&lt;h2 id=&quot;conclusao&quot;&gt;Conclusão&lt;/h2&gt;

&lt;p&gt;De todo esse papo técnico mas também filosófico, o que você nunca deve esquecer quando estiver construindo uma Classe é:&lt;/p&gt;

&lt;p&gt;&lt;em&gt;O estado de um Objeto jamais deve ser violado.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;Após o Objeto ser criado, seu Estado — implícito ou explícito — nunca poderia ser alterado, permanecendo intacto até o fim da sua vida.&lt;/p&gt;

&lt;p&gt;Se esse Estado for violado significa que seu Objeto não possui &lt;a href=&quot;/posts/heranca-pode-ser-o-mal-da-orientacao-a-objetos-parte-2/#encapsulamento&quot;&gt;encapsulamento&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Um Objeto que não encapsula não pode ser considerado um Objeto. Chame-o de estrutura de dados.&lt;/p&gt;

&lt;p&gt;Objetos tem Estado, estruturas tem Dados.&lt;/p&gt;

&lt;p&gt;Até logo.&lt;/p&gt;
</description>
        <pubDate>Mon, 05 Jun 2017 00:00:00 +0100</pubDate>
        <link>http://objectpascalprogramming.com/estado-do-objeto</link>
        <guid isPermaLink="true">http://objectpascalprogramming.com/estado-do-objeto</guid>
      </item>
    
      <item>
        <title>Herdar para Rotular</title>
        <description>&lt;p&gt;A Herança de Classe pode ter outras finalidades que você ainda não havia pensado.&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;&lt;img src=&quot;/images/2017/photo-matt-briney-160808.jpg&quot; alt=&quot;Unsplash image&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;introducao&quot;&gt;Introdução&lt;/h2&gt;

&lt;p&gt;Já escrevi bastante sobre Herança &lt;a href=&quot;/posts/heranca-pode-ser-o-mal-da-orientacao-a-objetos-parte-1/&quot;&gt;aqui&lt;/a&gt; (série de artigos em 5 partes) e vimos o mal que seu uso pode trazer ao código Orientado a Objetos.&lt;/p&gt;

&lt;p&gt;No entanto, assim como uma arma de fogo pode ser inofensiva, pois é o ser humano que faz mal uso da arma, a herança pode ser inofensiva se for utilizada de forma &lt;a href=&quot;/posts/como-utilizar-heranca-apropriadamente/&quot;&gt;apropriada&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Nesse artigo você irá ver mais uma forma de uso da Herança de Classe, mas sem sobrescrita de métodos ou uso de propriedades e métodos protegidos.&lt;/p&gt;

&lt;p&gt;Vamos utilizar a Herança para &lt;em&gt;rotular&lt;/em&gt;.&lt;/p&gt;

&lt;h2 id=&quot;contextualizando&quot;&gt;Contextualizando&lt;/h2&gt;

&lt;p&gt;De vez em quanto eu costumo utilizar Herança de Classe apenas como um rótulo.&lt;/p&gt;

&lt;p&gt;Para que você entenda o benefício do uso de um rótulo, é necessário haver uma contextualização para compararmos o uso do código sem rótulo e, depois, com rótulo.&lt;/p&gt;

&lt;p&gt;Vamos ver um exemplo.&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/mdbs99/0676083483d1d9b75f21b8527e6e4897.js&quot;&gt;&lt;/script&gt;

&lt;p&gt;É uma Classe bem simples, apenas para exemplificar o que eu quero lhe mostrar.&lt;/p&gt;

&lt;p&gt;Se você não entendeu para que serve o método &lt;em&gt;New&lt;/em&gt;, veja sobre ele &lt;a href=&quot;/posts/interfaces-e-o-metodo-estatico-new/&quot;&gt;aqui&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Toda Classe deve implementar ao menos uma &lt;a href=&quot;/posts/interfaces-em-todo-lugar/&quot;&gt;Interface&lt;/a&gt;, então temos a Interface &lt;code&gt;IMoney&lt;/code&gt; com apenas um único método &lt;code&gt;Value: Currency&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Imagine agora que seu &lt;em&gt;software&lt;/em&gt; trata de vários tipos de Taxas e Descontos, mas vou citar apenas dois como exemplo:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Taxa de Inscrição (1%)&lt;/li&gt;
  &lt;li&gt;Desconto (10% se menor de 18 anos)&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Você, sendo um dos programadores numa empresa de Cursos de Mecânica de Automóveis, foi encarregado de implementar o cálculo de Inscrição e Desconto.&lt;/p&gt;

&lt;p&gt;Se o valor da inscrição é R$ 100 vamos imaginar um botão para apenas mostrar o valor total a pagar pelo novo aluno:&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/mdbs99/95395ad64ac9d1a7b3eed55ebf436724.js&quot;&gt;&lt;/script&gt;

&lt;p&gt;O código acima tem uma condicional, proporcionado pela classe &lt;code&gt;TIf&lt;/code&gt; (não relacionada nesse artigo), que é bem simples de entender:&lt;/p&gt;

&lt;p&gt;Se o (futuro) estudante tem idade menor do que 18 anos, ele irá ter um desconto de 10%, senão não haverá desconto.&lt;/p&gt;

&lt;p&gt;Depois há a função primitiva &lt;code&gt;CurrToStr&lt;/code&gt; para converter o somatório do Valor Inscrição + a Taxa de Inscrição (1%) - o Desconto (se houver) em &lt;code&gt;string&lt;/code&gt; para ser exibido num simples &lt;code&gt;ShowMessage&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Bem, você sabe isso porque eu estou lhe dizendo. Eu preparei o contexto antes que você visse o código. Se fosse tivesse visto apenas isso…&lt;/p&gt;

&lt;p&gt;&lt;code&gt;TPercentCalculated.New(V, 1).Value&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;…saberia que se trata de uma Taxa que calcula 1% do valor, mas não saberia dizer sobre &lt;em&gt;qual&lt;/em&gt; taxa o código se refere.&lt;/p&gt;

&lt;p&gt;É aí que usamos um rótulo.&lt;/p&gt;

&lt;h2 id=&quot;rotulando&quot;&gt;Rotulando&lt;/h2&gt;

&lt;p&gt;Um rótulo serve para marcar alguma coisa para facilitar a visão, a leitura, a identificação.&lt;/p&gt;

&lt;p&gt;Uma Classe também é um rótulo.&lt;/p&gt;

&lt;p&gt;O código abaixo é a refatoração do código que lhe acabei de mostrar:&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/mdbs99/02a4ab8115cbebe3fe671905d51c1dd1.js&quot;&gt;&lt;/script&gt;

&lt;p&gt;O código agora ficou muito mais &lt;a href=&quot;/posts/simplicidade/&quot;&gt;simples&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Está claro que o &lt;code&gt;valor&lt;/code&gt; é somado com uma Taxa de Inscrição e com um Desconto.&lt;/p&gt;

&lt;p&gt;O formulário que contém esse código, não “sabe” qual é o percentual da Taxa de Registro e nem como é feito o cálculo para o Desconto… e é assim que deve ser.&lt;/p&gt;

&lt;p&gt;Então a primeira refatoração seria criar 2 classes distintas, uma para cada tipo de cálculo. Mas aí teríamos um problema: &lt;a href=&quot;/posts/codigo-duplicado-talvez-nao/&quot;&gt;Código duplicado&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Se o cálculo é o mesmo, ou seja, apenas um percentual simples, porque eu iria duplicar o mesmo código em duas Classes? Não faz sentido.&lt;/p&gt;

&lt;p&gt;Mas podemos fazer isso:&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/mdbs99/0e8ac1cd0af1f631b5204061c554dbaf.js&quot;&gt;&lt;/script&gt;

&lt;p&gt;Agora ambas as Classes tem como herança &lt;code&gt;TPercentCalculated&lt;/code&gt;. No entanto eu não estou sobrecarregando nenhum Método e não estou usando nada protegido… na verdade esse código não está &lt;em&gt;tocando em nada&lt;/em&gt; da super Classe.&lt;/p&gt;

&lt;p&gt;Ambas as Classes apenas inicializam, de forma apropriada e contextualizada, a Classe &lt;code&gt;TPercentCalculated&lt;/code&gt; utilizando o &lt;a href=&quot;/posts/construtores-da-classe-primario-secundarios/&quot;&gt;construtor&lt;/a&gt; da super Classe.&lt;/p&gt;

&lt;p&gt;Apenas isso.&lt;/p&gt;

&lt;p&gt;Mas para o utilizador das Classes, elas parecem ser completamente independentes.&lt;/p&gt;

&lt;p&gt;Até logo.&lt;/p&gt;
</description>
        <pubDate>Mon, 29 May 2017 00:00:00 +0100</pubDate>
        <link>http://objectpascalprogramming.com/herdar-para-rotular</link>
        <guid isPermaLink="true">http://objectpascalprogramming.com/herdar-para-rotular</guid>
      </item>
    
      <item>
        <title>Observando Objetos</title>
        <description>&lt;p&gt;Um semáforo de trânsito está prestes a mudar de vermelho para verde e vários pedestres estão aguardando para atravessar a rua.&lt;/p&gt;

&lt;p&gt;A mudança de estado do semáforo irá impactar a vida de apenas algumas pessoas, ou seja, só daquelas que estão realmente interessadas, aguardando e observando este Evento que irá ocorrer em breve.&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;&lt;img src=&quot;/images/2017/photo-hermes-rivera-253620.jpg&quot; alt=&quot;Unsplash image&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;introducao&quot;&gt;Introdução&lt;/h2&gt;

&lt;p&gt;No &lt;a href=&quot;/eventos-e-objetos&quot;&gt;artigo anterior&lt;/a&gt; escrevi sobre &lt;a href=&quot;/eventos-e-objetos#eventos&quot;&gt;Eventos&lt;/a&gt; que ocorrem entre dois Objetos e como eles podem ser implementados de forma bem simples.&lt;/p&gt;

&lt;p&gt;Nesse artigo iremos implementar Eventos que possam notificar mais de um Objeto de uma só vez.&lt;/p&gt;

&lt;h2 id=&quot;observer-pattern&quot;&gt;Observer Pattern&lt;/h2&gt;

&lt;p&gt;Você pode utilizar um Evento para mostrar um &lt;em&gt;ProgressBar&lt;/em&gt; enquanto um processamento está ocorrendo ou notificar o usuário quando algum outro processo terminar.&lt;/p&gt;

&lt;p&gt;No entanto, em todos esses casos, os Eventos ocorrem entre apenas 2 Objetos: Transmissor e Receptor.&lt;/p&gt;

&lt;p&gt;Há casos, porém, onde o Transmissor deverá notificar mais de um Receptor.&lt;/p&gt;

&lt;p&gt;Há um padrão de implementação conhecido chamdo de &lt;a href=&quot;https://en.wikipedia.org/wiki/Observer_pattern&quot;&gt;&lt;em&gt;Observer Pattern&lt;/em&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Mas ao invés de só implementarmos o &lt;em&gt;Observer Pattern&lt;/em&gt; na sua forma clássica, utilizando seus termos como &lt;em&gt;Subject&lt;/em&gt; e &lt;em&gt;Observers&lt;/em&gt;, vamos entender como esse padrão funciona, utilizando uma abordagem mais direta, simples e &lt;em&gt;“Pascalized”&lt;/em&gt;.&lt;/p&gt;

&lt;h2 id=&quot;implementacao&quot;&gt;Implementação&lt;/h2&gt;

&lt;p&gt;A maneira mais óbvia — ou talvez a única — para implementar uma notificação que seja propagada não em apenas um ponto do código, mas sim em infinitos pontos ou infinitos Objetos, é utilizando uma simples… &lt;em&gt;lista&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;A pergunta é: Onde estará a instância dessa lista?&lt;/p&gt;

&lt;p&gt;A lista é global? Com certeza não, pois não trabalhamos com variáveis globais.&lt;/p&gt;

&lt;p&gt;A lista é implementada no Objeto transmissor? Também não, pois o transmissor — no exemplo é um semáforo — não dá a mínima para quem o está observando. O transmissor apenas dá a &lt;em&gt;possíbilidade&lt;/em&gt; de observação do evento, aceitando um ponteiro para o evento no &lt;a href=&quot;/posts/construtores-da-classe-primario-secundarios/&quot;&gt;construtor&lt;/a&gt;, primário ou secundário.&lt;/p&gt;

&lt;p&gt;Se não houvesse ninguém para observar o semáforo, ele iria parar de funcionar? Não! Portanto a &lt;em&gt;responsabilidade&lt;/em&gt; de notificação a vários Objetos não é do transmissor original.&lt;/p&gt;

&lt;p&gt;Então a lista é implementada em algum outro Objeto? Com certeza!&lt;/p&gt;

&lt;h3 id=&quot;exemplo-1&quot;&gt;1-Notificando um Objeto&lt;/h3&gt;

&lt;p&gt;Primeiramente vamos implementar um Evento simples, como no último artigo.&lt;/p&gt;

&lt;p&gt;Teremos um Objeto &lt;code&gt;Semaphore&lt;/code&gt;, que será o objeto transmissor de um Evento: Sempre que haver mudança de cor, o evento será disparado.&lt;/p&gt;

&lt;p&gt;Como estamos trabalhando com Orientação a Objetos, antes precisamos definir o &lt;a href=&quot;/posts/interfaces-em-todo-lugar/#interfaces-sao-contratos&quot;&gt;contrato&lt;/a&gt;, ou seja, a Interface que representa a entidade Semáforo.&lt;/p&gt;

&lt;p&gt;Veja o código baixo.&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/mdbs99/acfb7acf71670182b6cf509c51540949.js&quot;&gt;&lt;/script&gt;

&lt;p&gt;Vamos entender o código acima:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Há uma Interface &lt;code&gt;ISemaphore&lt;/code&gt; com apenas um Método &lt;code&gt;Color&lt;/code&gt;. Não há Eventos na Interface.&lt;/li&gt;
  &lt;li&gt;O tipo &lt;code&gt;TChangeEvent&lt;/code&gt; é a assinatura do Evento.&lt;/li&gt;
  &lt;li&gt;A classe &lt;code&gt;TSemaphore&lt;/code&gt; implementa a Interface &lt;code&gt;ISemaphore&lt;/code&gt;. Novamente, também não há Eventos na definição da Classe, apenas no construtor. O ato de notificação através de Eventos é um &lt;strong&gt;detalhe de implementação&lt;/strong&gt; e não faz parte da entidade na qual a Interface e a Classe &lt;a href=&quot;/posts/objetos-representam-entidades/&quot;&gt;representam&lt;/a&gt;.&lt;/li&gt;
  &lt;li&gt;A Classe &lt;code&gt;TSemaphore&lt;/code&gt; instância um &lt;code&gt;TTimer&lt;/code&gt;. É através desse &lt;em&gt;timer&lt;/em&gt; que a mudança de cores irá ocorrer (a cada 2 segundos).&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Agora, num novo projeto, adicionem um &lt;code&gt;TShape&lt;/code&gt; num &lt;code&gt;TForm&lt;/code&gt;, alterem a &lt;code&gt;property Shape&lt;/code&gt; para &lt;code&gt;stCircle&lt;/code&gt; e utilize o código abaixo:&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/mdbs99/f4221d8c6be58201bbb5a82da26fe1a3.js&quot;&gt;&lt;/script&gt;

&lt;p&gt;O código acima é &lt;em&gt;simples&lt;/em&gt;, &lt;em&gt;elegante&lt;/em&gt;, &lt;em&gt;Orientado a Objetos&lt;/em&gt; e não possui &lt;em&gt;Setters&lt;/em&gt;, nem mesmo para o Evento.&lt;/p&gt;

&lt;p&gt;Se você fez tudo certo, verá algo parecido com a imagem abaixo — e a cada 2 segundos a cor é alterada.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2017/screenshot-semaphore-1.jpg&quot; alt=&quot;semaphore&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Mas, mesmo que tudo esteja funcionando, temos apenas 1 Objeto (o &lt;em&gt;Form&lt;/em&gt;) que está “observando” o Evento de mudança de cor do semáforo.&lt;/p&gt;

&lt;p&gt;O que queremos é poder notificar “N” Objetos de uma só vez.&lt;/p&gt;

&lt;h3 id=&quot;exemplo-2&quot;&gt;2-Notificando muitos Objetos&lt;/h3&gt;

&lt;p&gt;Para notificar muitos Objetos precisamos de uma lista com os Objetos previamente adicionados.&lt;/p&gt;

&lt;p&gt;Vamos modificar o código existe e adicionar mais Interfaces e Classes.&lt;/p&gt;

&lt;p&gt;Essas são as Interfaces:&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/mdbs99/b5ebdc91138eb140bce07f5ef0dde976.js&quot;&gt;&lt;/script&gt;

&lt;p&gt;São mais duas Interfaces com nomes bem genéricos. Talvez, num projeto maior, seus nomes poderiam ser &lt;code&gt;ISemaphoreObserver&lt;/code&gt; e &lt;code&gt;ISemaphoreObservers&lt;/code&gt; respectivamente, afim de diminuir as chances de haver conflito de nomes. Mas isso é irrelevante por enquanto.&lt;/p&gt;

&lt;p&gt;Sendo nomes genéricos, eu posso implementar em Classes bem distintas que, inicialmente, não teriam nada haver com o contexto de Semáforo.&lt;/p&gt;

&lt;p&gt;Confuso?&lt;/p&gt;

&lt;p&gt;Vamos a um exemplo de implementação: &lt;em&gt;Pessoas&lt;/em&gt; que gostariam de ser notificadas a respeito das mudanças do semáforo:&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/mdbs99/74622575318450edc1fc40b8cd265f85.js&quot;&gt;&lt;/script&gt;

&lt;p&gt;Vamos entender o código acima:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Primeiramente, o &lt;em&gt;GUID&lt;/em&gt; na Interface &lt;code&gt;IObserver&lt;/code&gt; serve apenas para ser possível fazer o &lt;em&gt;casting&lt;/em&gt; no método &lt;code&gt;Get&lt;/code&gt; de &lt;code&gt;TPeople&lt;/code&gt;. Fique a vontade para usar &lt;em&gt;Generics&lt;/em&gt;.&lt;/li&gt;
  &lt;li&gt;A Interface &lt;code&gt;IObservers&lt;/code&gt; é um subtipo de &lt;code&gt;IObserver&lt;/code&gt; apenas para aproveitar a definição do método &lt;code&gt;Changed&lt;/code&gt;.&lt;/li&gt;
  &lt;li&gt;O método &lt;code&gt;Changed&lt;/code&gt; faz parte da definição da Interface &lt;code&gt;IObserver&lt;/code&gt;, sim, porque a entidade que ela representa necessita: Um observador precisa saber das mudanças do Objeto observado.&lt;/li&gt;
  &lt;li&gt;Um Objeto &lt;code&gt;TPeople&lt;/code&gt; é apenas uma lista que irá repassar o Evento para seus itens.&lt;/li&gt;
  &lt;li&gt;Quando um Objeto &lt;code&gt;TPerson&lt;/code&gt; tem seu método &lt;code&gt;Changed&lt;/code&gt; chamado na lista, ele irá gerar um novo Evento &lt;code&gt;OnStatus&lt;/code&gt;. Esse “status” é apenas para notificar o que o Objeto está fazendo.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Ok. Só falta agora ligar tudo isso junto.&lt;/p&gt;

&lt;p&gt;Vamos alterar um pouco o código inicial do &lt;em&gt;Form&lt;/em&gt;:&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/mdbs99/31851f1e8e5d70f893ab84c0df2614f7.js&quot;&gt;&lt;/script&gt;

&lt;p&gt;Vamos entender o código acima:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Adicionei um &lt;code&gt;TMemo&lt;/code&gt;.&lt;/li&gt;
  &lt;li&gt;Adicionei um método privado &lt;code&gt;PersonStatus&lt;/code&gt;.&lt;/li&gt;
  &lt;li&gt;Renomeei &lt;code&gt;FSemaphore&lt;/code&gt; para &lt;code&gt;FSemaphore1&lt;/code&gt; e criei outro do mesmo tipo.&lt;/li&gt;
  &lt;li&gt;Adicionei um atributo &lt;code&gt;FPeople&lt;/code&gt;.&lt;/li&gt;
  &lt;li&gt;Por fim foi alterado o &lt;code&gt;FormCreate&lt;/code&gt;.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Acho que você já entendeu o que irá ocorrer aqui, certo?&lt;/p&gt;

&lt;p&gt;Se você replicou tudo certo aí, verá uma imagem parecida com essa abaixo:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2017/screenshot-semaphore-2.jpg&quot; alt=&quot;semaphore&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;conclusao&quot;&gt;Conclusão&lt;/h2&gt;

&lt;p&gt;Utilizar Eventos não quer dizer, necessariamente, que você está utilizando RAD.&lt;/p&gt;

&lt;p&gt;Eventos são necessários para unir duas peças que, talvez, não tenham nada em comum mas que precisam se comunicar.&lt;/p&gt;

&lt;p&gt;Nesse artigo tentei mostrar uma maneira de implementar eventos de forma mais Orientada a Objetos, utilizando Interfaces e Classes e não apenas ponteiros para métodos.&lt;/p&gt;

&lt;p&gt;Mostrei que a lista de notificações não deve ficar no transmissor. Assim poderíamos acrescentar mais listas de notificações. Listas que notificam listas, se necessário. E os itens dessas listas poderiam ser instâncias de Classes complemente diferentes umas das outras, assim como o que iriam fazer — seu comportamento — ao receber a notificação da lista. Isso deixa nosso código bem extensível, sem que precisemos alterar o que já foi concluído.&lt;/p&gt;

&lt;p&gt;Até logo.&lt;/p&gt;
</description>
        <pubDate>Mon, 22 May 2017 00:00:00 +0100</pubDate>
        <link>http://objectpascalprogramming.com/observando-objetos</link>
        <guid isPermaLink="true">http://objectpascalprogramming.com/observando-objetos</guid>
      </item>
    
      <item>
        <title>Eventos e Objetos</title>
        <description>&lt;p&gt;Quando o semáforo de trânsito muda de vermelho para verde, isso é considerado um Evento ou uma Mensagem entre Objetos (motorista e semáforo)?&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;&lt;img src=&quot;/images/2017/photo-ashim-d-silva-95242.jpg&quot; alt=&quot;Unsplash image&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;introducao&quot;&gt;Introdução&lt;/h2&gt;

&lt;p&gt;O mundo é constituído de Eventos.&lt;/p&gt;

&lt;p&gt;Uma sirene que toca ao longe; o semáforo que passou de amarelo para vermelho; as notificaçõess do celular; a luz que acende num painel; o atendente do Starbucks chamando seu nome quando o café está pronto.&lt;/p&gt;

&lt;p&gt;Um &lt;a href=&quot;https://en.wikipedia.org/wiki/Event_(computing)&quot;&gt;Evento&lt;/a&gt; no mundo computacional é uma ação ou ocorrência gerado no software e reconhecido e tratado pelo software.&lt;/p&gt;

&lt;p&gt;Entre Objetos computacionais, existem 2 formas de interação: Mensagens e Eventos.&lt;/p&gt;

&lt;h2 id=&quot;mensagens&quot;&gt;Mensagens&lt;/h2&gt;

&lt;p&gt;Dois Objetos comunicam-se entre si através de &lt;a href=&quot;/posts/diga-me-algo-sobre-voce/#mensagens&quot;&gt;mensagens&lt;/a&gt; ou Métodos.&lt;/p&gt;

&lt;p&gt;Podemos chamar essa troca de mensagens de diálogo pois os Objetos que estão participando da “conversa” estão todos “cientes” do trabalho que estão desenvolvendo juntos (composição).&lt;/p&gt;

&lt;p&gt;Cada Objeto está fazendo o trabalho para o qual foi &lt;a href=&quot;/posts/interfaces-em-todo-lugar/#interfaces-sao-contratos&quot;&gt;contrato&lt;/a&gt; e repassando seu resultado para o próximo Objeto afim de terminar um trabalho maior.&lt;/p&gt;

&lt;p&gt;Para um Objeto enviar uma Mensagem à outro, ele deve saber como passar a mensagem na forma que o receptor já conhece, para que as instruções sejam entendidas.&lt;/p&gt;

&lt;p&gt;Em outras palavras, o transmissor deve conhecer a Interface do receptor.&lt;/p&gt;

&lt;p&gt;Mas num diálogo entre alguns Objetos, podem haver interrupções externas que quebra o fluxo normal, podendo mudar o comportamento em execução.&lt;/p&gt;

&lt;p&gt;Imaginem dois Objetos trabalhando, fazendo um &lt;em&gt;parser&lt;/em&gt; de arquivos PDF, o usuário clica no botão “cancelar” para notificar, a quem quiser saber, que a operação em andamento deve ser cancelada.&lt;/p&gt;

&lt;p&gt;Isso é um Evento.&lt;/p&gt;

&lt;h2 id=&quot;eventos&quot;&gt;Eventos&lt;/h2&gt;

&lt;p&gt;Um Evento, diferente de um diálogo, é como um interruptor. Ele desvia o “fluxo normal” do diálogo entre Objetos para notificar outros Objetos — que ele desconhece ou ignora — que podem ou não estar inseridos no mesmo contexto ou trabalho em andamento.&lt;/p&gt;

&lt;p&gt;Por exemplo:
Dois mecânicos estão fazendo um belo trabalho na montagem de um motor recem retificado, a sirene sinalizando a hora do almoço toca. Eles largam suas ferramentas e vão almoçar.&lt;/p&gt;

&lt;p&gt;Podemos dizer que eles estavam &lt;em&gt;aguardando&lt;/em&gt; esse Evento? Sim. Deviam estar anciosos para o almoço…&lt;/p&gt;

&lt;p&gt;Então todo evento é &lt;em&gt;aguardado&lt;/em&gt; pelos Objetos?&lt;/p&gt;

&lt;p&gt;Creio que sim. Pelo menos no mundo computacional.&lt;/p&gt;

&lt;p&gt;Os Objetos em sistemas computacionais não tem &lt;em&gt;sentidos&lt;/em&gt; como os seres humanos. Os 5 sentidos humanos são como interpretadores de todo tipo de Evento que pode ocorrer ao seu redor. Então, sim, aguardamos por qualquer tipo de Evento que possa ocorrer, pois temos a capacidade de interpretá-los e tomar uma decisão sobre o que fazer.&lt;/p&gt;

&lt;p&gt;Já os Objetos dentro de um software são apenas abstrações de &lt;a href=&quot;/posts/objetos-representam-entidades/&quot;&gt;entidades&lt;/a&gt; do mundo real. Sendo abstrações, eles são construídos de forma minimalista — ou deveriam ser — para representar apenas uma faceta da entidade na qual eles representam. Então temos que implementar apenas os Eventos essenciais que essa abstração deveria aguardar. Caso ocorram.&lt;/p&gt;

&lt;p&gt;Um evento é uma notificação que um Objeto faz a quem estiver interessado. O Objeto (emissor) não sabe a quem está enviando a notificação.&lt;/p&gt;

&lt;p&gt;Em outras palavras, é o receptor que deve ter conhecimento sobre como será emitido o evento no transmissor, ou seja, sua Interface.&lt;/p&gt;

&lt;h2 id=&quot;implementacao&quot;&gt;Implementação&lt;/h2&gt;

&lt;p&gt;A implementação de um Evento, em qualquer linguagem de programação, pode ser definida basicamente como um &lt;em&gt;ponteiro para uma função&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;Essa foi a maneira que o Delphi implementou os Eventos dos &lt;em&gt;widgets&lt;/em&gt; de um Formulário.&lt;/p&gt;

&lt;p&gt;Um clique num botão, por exemplo, é um ponteiro para uma função que está definida fora da instância do botão (Classe TButton e/ou derivados).&lt;/p&gt;

&lt;p&gt;A implementação dessa função normalmente está localizada no Formulário onde o botão está inserido.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;procedure TForm1.Button1Click(Sender: TObject);
begin
  ShowMessage(&#39;Clicked&#39;);
end;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;No código acima &lt;code&gt;Button1Click&lt;/code&gt; é um método da Classe &lt;code&gt;TForm1&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;No &lt;em&gt;design&lt;/em&gt; do Formulário (arquivo *.dfm ou *.lfm) haverá um código como abaixo:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;object Button1: TButton
  Left = 102
  Height = 25
  Top = 72
  Width = 75
  Caption = &#39;Button1&#39;
  OnClick = Button1Click
  TabOrder = 0
end
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Em &lt;em&gt;runtime&lt;/em&gt; o compilador irá configurar o evento &lt;code&gt;OnClick&lt;/code&gt; — uma propriedade do tipo &lt;code&gt;TNotifyEvent&lt;/code&gt; — da instância &lt;code&gt;Button1&lt;/code&gt; para utilizar a “função” &lt;code&gt;Button1Click&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Essa é a “maneira clássica” de utilizarmos Eventos.&lt;/p&gt;

&lt;p&gt;É uma maneira &lt;em&gt;simples&lt;/em&gt; e &lt;em&gt;eficaz&lt;/em&gt;, porém primitiva — mas eu não estou dizendo isso de maneira perjorativa.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Primitivo: que é o primeiro a existir; que coincide com a origem de algo; inicial, primevo, original.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Vamos ver outra maneira de utilizarmos Eventos, apenas com Classes sem a necessidade de propriedades com &lt;a href=&quot;/posts/getters-e-setters/&quot;&gt;&lt;em&gt;Getters/Setters&lt;/em&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Vou utilizar esse exemplo de Classe Log &lt;a href=&quot;/posts/classes-devem-implementar-apenas-uma-responsabilidade/#implementacao-oo&quot;&gt;aqui&lt;/a&gt; como base:&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/mdbs99/c5da3c1d04894b7ee949aa1f7735aade.js&quot;&gt;&lt;/script&gt;

&lt;p&gt;As mensagens desse programa serão:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;“log start”&lt;/li&gt;
  &lt;li&gt;“log finish”&lt;/li&gt;
  &lt;li&gt;“clicked”&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Temos algumas diferenças entre o primeiro exemplo (Button1) e este último (Log).&lt;/p&gt;

&lt;p&gt;Ao invés da Classe &lt;code&gt;TLogInMemory&lt;/code&gt; possuir 2 propriedades do tipo &lt;code&gt;TLogNotifyEvent&lt;/code&gt; para implementar os eventos, ela recebe os “ponteiros” no construtor e isso simplifica muita coisa.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Primeiro&lt;/em&gt;, não precisamos definir as propriedades na Interface &lt;code&gt;ILog&lt;/code&gt;, mantendo-a limpa. Caso essas propriedades fossem definidas na Interface, obrigatoriamente teríamos que definir 3 linhas para cada propriedade:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;property OnStart: TLogNotifyEvent 
             read GetOnStart 
            write SetOnStart;
&lt;/code&gt;&lt;/pre&gt;

&lt;ol&gt;
  &lt;li&gt;A propriedade em si&lt;/li&gt;
  &lt;li&gt;O método GetOnStart&lt;/li&gt;
  &lt;li&gt;O método SetOnStart&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Como Interfaces não possuem atributos, os Métodos de leitura e escrita teríam que ser definidos na Interface e implementados em todas as Classes.&lt;/p&gt;

&lt;p&gt;Bem &lt;em&gt;verboso&lt;/em&gt;, não?&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Segundo&lt;/em&gt;, não precisamos definir nenhuma propridade em &lt;code&gt;TLogInMemory&lt;/code&gt; mesmo que não houvessem os &lt;em&gt;Getters/Setters&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Terceiro&lt;/em&gt;, uma vez definido os eventos, não podemos modificá-los deixando a Classe &lt;a href=&quot;/posts/objetos-imutaveis/&quot;&gt;imutável&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Simples e elegante.&lt;/p&gt;

&lt;h2 id=&quot;conclusao&quot;&gt;Conclusão&lt;/h2&gt;

&lt;p&gt;Os Eventos fazem parte de qualquer sistema. Podemos tirar proveito dessa técnica primária para deixar nossos Objetos com comportamento mais dinâmico.&lt;/p&gt;

&lt;p&gt;O acoplamento entre os Objetos é reduzido. O transmissor do Evento não sabe quem irá recebê-los, o que é ótimo.&lt;/p&gt;

&lt;p&gt;Essa é a forma mais básica e limpa para utilizarmos Eventos no &lt;em&gt;Object Pascal&lt;/em&gt;, mas não é a única.&lt;/p&gt;

&lt;p&gt;E se quisermos que mais de um Objeto seja notificado?&lt;/p&gt;

&lt;p&gt;Não seria melhor utilizarmos Objetos ao invés de simples ponteiros para função?&lt;/p&gt;

&lt;p&gt;Bem, essas são perguntas que poderão ser respondidas em outro artigo.&lt;/p&gt;

&lt;p&gt;Até logo.&lt;/p&gt;
</description>
        <pubDate>Mon, 08 May 2017 00:00:00 +0100</pubDate>
        <link>http://objectpascalprogramming.com/eventos-e-objetos</link>
        <guid isPermaLink="true">http://objectpascalprogramming.com/eventos-e-objetos</guid>
      </item>
    
      <item>
        <title>Organização de Projetos</title>
        <description>&lt;p&gt;Todo novo Projeto é uma boa oportunidade para melhorarmos nossa habilidade de organização.&lt;/p&gt;

&lt;p&gt;Como você organiza a parte física e lógica dos seus Projetos?&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;&lt;img src=&quot;/images/2017/photo-jeff-hopper-17306.jpg&quot; alt=&quot;Unsplash image&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;introducao&quot;&gt;Introdução&lt;/h2&gt;

&lt;p&gt;A organização do Projeto é uma etapa muito importante no desenvolvimento do &lt;em&gt;software&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;Trabalhar num Projeto organizado é muito mais satisfatório e eficaz.&lt;/p&gt;

&lt;p&gt;No entanto, muitos desenvolvedores ainda acham que é perda de tempo organizar e querem logo iniciar a codificação, sem pensar na modularização e nomenclaturas de todas as partes que irão compor o Projeto.&lt;/p&gt;

&lt;p&gt;Utilizar uma boa nomenclatura, padronizando os nomes dos pacotes e arquivos é de suma importância para que o desenvolvimento flua de forma eficaz entre a equipe.&lt;/p&gt;

&lt;p&gt;Uma boa nomenclatura também ajuda na modularização, como veremos a seguir.&lt;/p&gt;

&lt;h2 id=&quot;projeto&quot;&gt;Nome do Projeto&lt;/h2&gt;

&lt;p&gt;Todo Projeto é construído para alguma empresa e por isso toda empresa deve ter sua própria árvore de Projetos. Caso seu Projeto seja feito para uma pessoa e não empresa, utilize o nome da pessoa.&lt;/p&gt;

&lt;p&gt;Então vem o nome do Projeto, que deve ser curto, de fácil memorização e escrita.&lt;/p&gt;

&lt;p&gt;Por quê?&lt;/p&gt;

&lt;p&gt;Primeiro, o nome do Projeto irá fazer parte do nome das &lt;em&gt;units&lt;/em&gt; como um prefixo, evitando a colisão de nomes com outros Projetos ou &lt;em&gt;Libs&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;Segundo, o nome do Projeto será utilizado por outras ferramentas de análise e acompanhamento das tarefas (tickets) e prazos. Todo nome deve ser de fácil memorização e como uma boa identidade.&lt;/p&gt;

&lt;p&gt;Não use nomes indecifráveis com &lt;em&gt;SisXpto10&lt;/em&gt; ou nomes grandes e sem personalidade como &lt;em&gt;Sistema de Tickets ABC&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;Nomes de Projetos devem ser curtos, fáceis de lembrar e… &lt;em&gt;sexys&lt;/em&gt;, por que não?&lt;/p&gt;

&lt;p&gt;Tenho Projetos chamados Sophia, &lt;a href=&quot;https://github.com/mdbs99/james&quot;&gt;James&lt;/a&gt;, Odin, &lt;a href=&quot;https://github.com/mdbs99/greyhound&quot;&gt;Greyhound&lt;/a&gt;, Dog, Nicole, e muitos outros.&lt;/p&gt;

&lt;p&gt;Tente encontrar um nome que tenha haver com o Projeto. Pode ser por causa da definição do nome em si, o que ele representa, uma sátira, apelido, pela “sonoridade” ou porque é &lt;em&gt;legal&lt;/em&gt;.&lt;/p&gt;

&lt;h2 id=&quot;diretorios-e-arquivos&quot;&gt;Diretórios e Arquivos&lt;/h2&gt;

&lt;p&gt;Nos meus Projetos, sejam eles individuais ou em equipe, eles tem basicamente essa estrutura logo abaixo.&lt;/p&gt;

&lt;h3 id=&quot;diretorios&quot;&gt;Diretórios&lt;/h3&gt;

&lt;p&gt;A começar pela nomenclatura dos diretórios, utilizo a seguinte divisão:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;empresa
  |
  projeto
    |
    bin  : todos os arquivos binários e libs
    |
    doc  : toda a documentação
    |
    pkg  : todos os pacotes
    |
    src  : fontes de produção
    |
    test : fontes de testes
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Obviamente eu não inventei essa estrutura que é bem simples e lógica. Muitos Projetos &lt;em&gt;Open Source&lt;/em&gt; já a utilizam a muito tempo.&lt;/p&gt;

&lt;p&gt;O nome dos diretórios poderiam ser &lt;code&gt;/binaries&lt;/code&gt;, &lt;code&gt;/documentation&lt;/code&gt;, &lt;code&gt;/packages&lt;/code&gt;, &lt;code&gt;/source&lt;/code&gt; e &lt;code&gt;/tests&lt;/code&gt; porém para nomes de diretórios, quanto menor, melhor. Você irá lembrar disso quando tiver que digitar no console, digitar os &lt;em&gt;paths&lt;/em&gt; na IDE, etc.&lt;/p&gt;

&lt;p&gt;Considero uma árvore simples e limpa. Mas nem todos os projetos a utilizam.&lt;/p&gt;

&lt;p&gt;Por exemplo. A maioria dos projetos Java são codificados com base na URL da empresa em conjunto com algum padrão estranho.&lt;/p&gt;

&lt;p&gt;Exemplo: &lt;code&gt;empresa/projeto/src/main/java/com/acme/projeto&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Na minha opinião, esta é uma nomenclatura muito deselegante e repetitiva.&lt;/p&gt;

&lt;p&gt;Por quê o nome do projeto se repete nos diretórios? Não sei. Talvez a IDE faça isso e ninguém dá a mínima.&lt;/p&gt;

&lt;p&gt;O que o &lt;code&gt;/com&lt;/code&gt; significa no contexto do Projeto? Nada. Apenas um padrão que seguem para evitar a colisão de nomes, talvez.&lt;/p&gt;

&lt;p&gt;E por quê &lt;code&gt;/java&lt;/code&gt; deve fazer parte da árvore de diretórios?!&lt;/p&gt;

&lt;p&gt;Realmente não sei.&lt;/p&gt;

&lt;h3 id=&quot;arquivos&quot;&gt;Arquivos&lt;/h3&gt;

&lt;p&gt;Já o nome dos arquivos, ou seja, das &lt;em&gt;units&lt;/em&gt;, devem seguir o seguinte padrão:&lt;/p&gt;

&lt;p&gt;&lt;code&gt;&amp;lt;projeto&amp;gt;.&amp;lt;grupo&amp;gt;.&amp;lt;subgrupo&amp;gt;.&amp;lt;nome&amp;gt;&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;Apenas &lt;code&gt;&amp;lt;projeto&amp;gt;&lt;/code&gt; e &lt;code&gt;&amp;lt;grupo&amp;gt;&lt;/code&gt; são obrigatórios.&lt;/p&gt;

&lt;p&gt;Por quê?&lt;/p&gt;

&lt;p&gt;Bem, cada &lt;em&gt;unit&lt;/em&gt; no &lt;em&gt;Object Pascal&lt;/em&gt; pode conter mais de uma Classe. Então não é necessário um &lt;code&gt;&amp;lt;nome&amp;gt;&lt;/code&gt; de Classe, por exemplo, como é o caso do Java.&lt;/p&gt;

&lt;p&gt;Apenas para Formulários e &lt;a href=&quot;/posts/datamodule-e-apenas-um-container/&quot;&gt;&lt;em&gt;DataModules&lt;/em&gt;&lt;/a&gt;, o nome será obrigatório.&lt;/p&gt;

&lt;p&gt;Vejamos alguns exemplos:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/mdbs99/james/blob/master/src/james.data.pas&quot;&gt;james.data&lt;/a&gt; contém &lt;code&gt;&amp;lt;projeto&amp;gt;&lt;/code&gt; e &lt;code&gt;&amp;lt;grupo&amp;gt;&lt;/code&gt;;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/mdbs99/james/blob/master/src/james.data.clss.pas&quot;&gt;james.data.clss&lt;/a&gt; contém &lt;code&gt;&amp;lt;projeto&amp;gt;&lt;/code&gt;, &lt;code&gt;&amp;lt;grupo&amp;gt;&lt;/code&gt; e &lt;code&gt;&amp;lt;subgrupo&amp;gt;&lt;/code&gt;;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/mdbs99/james/blob/master/src/james.data.stream.clss.pas&quot;&gt;james.data.stream.clss&lt;/a&gt; contém &lt;code&gt;&amp;lt;projeto&amp;gt;&lt;/code&gt;, &lt;code&gt;&amp;lt;grupo&amp;gt;&lt;/code&gt; e dois &lt;code&gt;&amp;lt;subgrupo&amp;gt;&lt;/code&gt;;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Existem alguns &lt;em&gt;sufixos&lt;/em&gt; de arquivos que utilizo bastante:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Clss : conterá classes que implementam interfaces;&lt;/li&gt;
  &lt;li&gt;Tests : contém as classes de testes;&lt;/li&gt;
  &lt;li&gt;Form : utilizado para todos os formulários;&lt;/li&gt;
  &lt;li&gt;Module : utilizado para todos os &lt;em&gt;DataModules&lt;/em&gt;;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Para o nome das Classes, veja &lt;a href=&quot;/posts/nomeando-classes/&quot;&gt;esse artigo&lt;/a&gt;.&lt;/p&gt;

&lt;h2 id=&quot;dividir&quot;&gt;Dividir para Conquistar&lt;/h2&gt;

&lt;p&gt;Todo projeto de tamanho médio ou grande, deve ser dividido em módulos lógicos, ou seja, subdiretórios dentro de &lt;code&gt;/src&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Essa divisão irá depender exclusivamente do seu projeto e contextos.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;“Dividir para conquistar” — Napoleão&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Essa divisão em subdiretórios é importante para termos a reutilização dos fontes por outros Projetos e ao mesmo tempo a restrição de visibilidade.&lt;/p&gt;

&lt;p&gt;Se os fontes de um Projeto ficasse em apenas um diretório, outros Projetos poderiam ter acesso a tudo. Dividindo em subdiretórios você pode restringir a visibilidade e acesso para esses outros Projetos.&lt;/p&gt;

&lt;p&gt;Outra possibilidade bem interessante é dividir os módulos em &lt;a href=&quot;/posts/james-e-testes-de-unidade/#pacote-de-testes&quot;&gt;Pacotes&lt;/a&gt; reutilizáveis entre Projetos distintos.
Nesse padrão a divisão dos fontes não é apenas por subdiretórios, mas sim por árvores completamente diferentes.&lt;/p&gt;

&lt;p&gt;É normal criarmos Pacotes para componentes e &lt;em&gt;Libs&lt;/em&gt; reutilizáveis, mas criar Pacotes entre Projetos também pode ser muito eficaz para o desenvolvimento.&lt;/p&gt;

&lt;p&gt;No Lazarus, basta abrir um Pacote uma única vez que ele já fica registrado na IDE. Depois basta adicionar o Pacote no(s) Projeto(s) para reutilizar seus fontes. Caso queira mudar o &lt;em&gt;path&lt;/em&gt; do Pacote, basta fazer num único lugar (XML de configuração da IDE) para que todos os outros Projetos sejam atualizados. Isso é muito melhor do que ter que alterar &lt;em&gt;paths&lt;/em&gt; de diretório reutilizáveis em cada Projeto.&lt;/p&gt;

&lt;h2 id=&quot;conclusao&quot;&gt;Conclusão&lt;/h2&gt;

&lt;p&gt;Um Projeto de &lt;em&gt;software&lt;/em&gt; não é apenas código-fonte. Devemos fazer um estudo desde o nome a ser utilizado, passando pela nomenclatura, diretórios e divisões de cada módulo.&lt;/p&gt;

&lt;p&gt;Seu Projeto poderá ter uma vida mais longa se você souber onde encontrar cada peça facilmente.&lt;/p&gt;

&lt;p&gt;A divisão por módulos irá facilitar a manutenção no longo prazo e a nomenclatura correta irá deixar tudo mais fácil.&lt;/p&gt;

&lt;p&gt;E você, como organiza seus Projetos?&lt;/p&gt;

&lt;p&gt;Até logo.&lt;/p&gt;
</description>
        <pubDate>Mon, 01 May 2017 00:00:00 +0100</pubDate>
        <link>http://objectpascalprogramming.com/organizacao-de-projetos</link>
        <guid isPermaLink="true">http://objectpascalprogramming.com/organizacao-de-projetos</guid>
      </item>
    
      <item>
        <title>James e Testes de Unidade</title>
        <description>&lt;p&gt;James foi atualizado com Testes de Unidade.&lt;/p&gt;

&lt;p&gt;Veja nesse artigo como tudo foi configurado e como você pode adicionar seus próprios testes apenas alterando um arquivo XML.&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;&lt;img src=&quot;/images/photo-clark-young-135435.jpg&quot; alt=&quot;Unsplash image&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;introducao&quot;&gt;Introdução&lt;/h2&gt;

&lt;p&gt;A utilização de testes automatizados é obrigatório em qualquer projeto.&lt;/p&gt;

&lt;p&gt;Você pode criar os testes utilizando pequenos programas que serão compilados e executados no &lt;em&gt;console&lt;/em&gt;. Dependendo do código de resultado ao terminar, você saberá se o programa teve ou não sucesso.&lt;/p&gt;

&lt;p&gt;Alguns &lt;em&gt;frameworks&lt;/em&gt; facilitam esse processo. Chamados de &lt;a href=&quot;https://en.wikipedia.org/wiki/XUnit&quot;&gt;xUnit&lt;/a&gt;, eles dão aos desenvolvedores todo o suporte para criar todo tipo de teste no código. Basta você herdar de alguma classe padrão e criar métodos de teste.&lt;/p&gt;

&lt;p&gt;No entanto, não importa se esses testes utilizam algum &lt;em&gt;framework&lt;/em&gt; específico, nem se foram criados de acordo com o processo de &lt;a href=&quot;https://en.wikipedia.org/wiki/Test-driven_development&quot;&gt;&lt;em&gt;Test-driven development&lt;/em&gt; (TDD)&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;O importante é ter os testes.&lt;/p&gt;

&lt;h2 id=&quot;pacote-de-testes&quot;&gt;Pacote de Testes&lt;/h2&gt;

&lt;p&gt;No &lt;a href=&quot;https://github.com/mdbs99/james&quot;&gt;James&lt;/a&gt; eu utilizei um &lt;em&gt;framework&lt;/em&gt; chamado &lt;a href=&quot;http://wiki.freepascal.org/fpcunit&quot;&gt;FPCUnit&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;É um &lt;em&gt;framework&lt;/em&gt; xUnit padrão do FPC/Lazarus muito parecido com o &lt;a href=&quot;http://dunit.sourceforge.net/&quot;&gt;DUnit&lt;/a&gt; do Delphi.&lt;/p&gt;

&lt;p&gt;Basta clicar em &lt;code&gt;File-&amp;gt;New-&amp;gt;FPCUnit Test Application&lt;/code&gt;, digitar o nome da Classe de Teste, clicar em “criar unit” e pronto. Depois basta ir criando os métodos com os testes.&lt;/p&gt;

&lt;p&gt;No James a configuração é um pouco mais sofisticada e é importante que você saiba como tudo funciona.&lt;/p&gt;

&lt;p&gt;O James tem 2 pacotes (atualmente):&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;james.lpk&lt;/li&gt;
  &lt;li&gt;james.tests.lpk&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Ambos estão no diretório &lt;code&gt;/pkg&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;O pacote &lt;code&gt;james.lpk&lt;/code&gt; contém as Classes principais e o &lt;code&gt;james.tests.lpk&lt;/code&gt; apenas as Classes de Testes.&lt;/p&gt;

&lt;p&gt;Esse último tem a dependência com o primeiro.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/photo-pkg-james.tests-01001.jpg&quot; alt=&quot;james.tests.lpk&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Para o usuário do James, apenas o pacote &lt;code&gt;james.lpk&lt;/code&gt; é necessário.&lt;/p&gt;

&lt;p&gt;Então por quê criar um outro pacote apenas de testes?&lt;/p&gt;

&lt;p&gt;O motivo é que eu posso ter tipos de aplicações de testes diferentes (desktop ou console) e basta atualizar os fontes do pacote para que qualquer aplicação fique atualizada.&lt;/p&gt;

&lt;p&gt;Essa técnica eu aprendi com meu amigo &lt;a href=&quot;https://github.com/jcmoraisjr&quot;&gt;João Morais&lt;/a&gt; quando comecei a acompanhar um de seus projetos chamado &lt;a href=&quot;https://github.com/jcmoraisjr/jcore&quot;&gt;JCore&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Nos fontes do James, há o projeto &lt;a href=&quot;https://github.com/mdbs99/james/blob/master/test/james.tests.gui.lpr&quot;&gt;james.tests.gui&lt;/a&gt; que utiliza o pacote de testes.&lt;/p&gt;

&lt;h2 id=&quot;fpcunit&quot;&gt;Teste com FPCUnit&lt;/h2&gt;

&lt;p&gt;O projeto &lt;code&gt;james.tests.gui&lt;/code&gt; utiliza a interface do FPCUnit.&lt;/p&gt;

&lt;p&gt;Ao executar o projeto a tela abaixo será exibida. Basta então executar todos os testes (F9) e verificar se houve algum erro.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/photo-fpcunit-loading-552.jpg&quot; alt=&quot;FPCUnit loading&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Se você baixar, compilar e executar esse projeto, ele irá exibir alguns erros dizendo que o arquivo &lt;code&gt;james.tests.template.xml&lt;/code&gt; não foi encontrado.&lt;/p&gt;

&lt;p&gt;O que você deve fazer é copiar esse arquivo da pasta &lt;code&gt;/test&lt;/code&gt; para a pasta &lt;code&gt;/bin&lt;/code&gt; e modificar seu conteúdo com seus próprios arquivos e configurações.&lt;/p&gt;

&lt;p&gt;Veja um exemplo de configuração para alguns dos meus arquivos de teste:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&amp;gt;
&amp;lt;Tests&amp;gt;
  &amp;lt;TStreamDividedTest&amp;gt;
    &amp;lt;files&amp;gt;
      &amp;lt;file-1 filename=&quot;tests/04DF86C9.PDF&quot; part=&quot;3&quot; /&amp;gt;
    &amp;lt;/files&amp;gt;
  &amp;lt;/TStreamDividedTest&amp;gt;
  &amp;lt;TStreamPartialFromTextTest&amp;gt;
    &amp;lt;files&amp;gt;
      &amp;lt;file-1 filename=&quot;tests/04DF86C9.PDF&quot; text=&quot;encoding=&quot; /&amp;gt;
    &amp;lt;/files&amp;gt;
  &amp;lt;/TStreamPartialFromTextTest&amp;gt;
&amp;lt;/Tests&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Veja que de acordo com o path dos arquivos no XML, meus arquivos ficam em &lt;code&gt;/bin/tests/&lt;/code&gt;. Pois &lt;code&gt;/bin/&lt;/code&gt; é a pasta padrão onde o executável será gerado.&lt;/p&gt;

&lt;p&gt;São arquivos pessoais e/ou privados de projetos reais. Esses arquivos não podem subir para o Github. Por isso meus testes utilizam um XML configurável.&lt;/p&gt;

&lt;p&gt;Então, se você quiser utilizar os Testes de Unidade do James, cabe a você configurar sua versão do XML.&lt;/p&gt;

&lt;p&gt;Se tudo der certo, você verá a tela abaixo.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/photo-fpcunit-green-552.jpg&quot; alt=&quot;FPCUnit green&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;ajudando&quot;&gt;Como ajudar&lt;/h2&gt;

&lt;p&gt;Se você quiser ajudar esse projeto — ou algum outro dos &lt;a href=&quot;https://github.com/mdbs99?tab=repositories&quot;&gt;meus projetos&lt;/a&gt; — siga esses passos:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Faça um fork do projeto;&lt;/li&gt;
  &lt;li&gt;Utilize o branch &lt;code&gt;develop&lt;/code&gt; para fazer qualquer modificação;&lt;/li&gt;
  &lt;li&gt;Faça um &lt;em&gt;Pull Request&lt;/em&gt; utilizando &lt;code&gt;develop&lt;/code&gt;.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Eu irei fazer a revisão das mudanças e se tudo tiver de acordo, sua contribuição será mesclada no &lt;code&gt;develop&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;O branch &lt;code&gt;master&lt;/code&gt; só irá conter a versão de produção, 100% compilada, com todos os Testes de Unidade funcionando. Por isso qualquer contribuição deverá ser enviada para o &lt;code&gt;develop&lt;/code&gt;.&lt;/p&gt;

&lt;h2 id=&quot;conclusao&quot;&gt;Conclusão&lt;/h2&gt;

&lt;p&gt;James é um projeto que está no começo. Estou refatorando meus códigos privados para criar o James (e outros projetos, futuramente).&lt;/p&gt;

&lt;p&gt;Tudo Open Source.&lt;/p&gt;

&lt;p&gt;Creio que todos esses projetos poderão ser compilados no Delphi, porém adaptações devem ser feitas.&lt;/p&gt;

&lt;p&gt;Se você tem interesse no projeto, preciso de ajuda para criar essas adaptações.&lt;/p&gt;

&lt;p&gt;Aguardo seus comentários.&lt;/p&gt;

&lt;p&gt;Até logo.&lt;/p&gt;
</description>
        <pubDate>Mon, 24 Apr 2017 00:00:00 +0100</pubDate>
        <link>http://objectpascalprogramming.com/posts/james-e-testes-de-unidade/</link>
        <guid isPermaLink="true">http://objectpascalprogramming.com/posts/james-e-testes-de-unidade/</guid>
      </item>
    
  </channel>
</rss>
