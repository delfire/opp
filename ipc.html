<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Inter-process Communication &#8211; Object Pascal Programming</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Sacadas sobre Programação Orientada a Objetos e Object Pascal.
">
    <meta name="author" content="Marcos Douglas B. Santos">
    <meta name="keywords" content="pascal, object pascal, delphi, freepascal, fpc, lazarus, marcos douglas blog, orientação a objetos, object oriented, oop, poo, software development blog, programming blog, quality of software, software blog, high quality programming">
    <meta name="keywords" content="FPC">
    <meta name="keywords" content="freepascal, fpc, delphi, lazarus, object-oriented, oop, mdbs99, ipc, simple ipc, inter-process communication, interprocess communication">
    <link rel="canonical" href="http://objectpascalprogramming.com/ipc">
    <link rel="alternate" type="application/rss+xml" title="RSS Feed for Object Pascal Programming" href="/feed.xml" />

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/pixyll.css?201801150209" type="text/css">

    <!-- Fonts -->
    <link href='//fonts.googleapis.com/css?family=Merriweather:900,900italic,300,300italic' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Lato:900,300' rel='stylesheet' type='text/css'>
    
      <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    

    <!-- Verifications -->
    

    <!-- Open Graph -->
    <!-- From: https://github.com/mmistakes/hpstr-jekyll-theme/blob/master/_includes/head.html -->
    <meta property="og:locale" content="pt_BR">
    <meta property="og:type" content="article">
    <meta property="og:title" content="Inter-process Communication">
    <meta property="og:description" content="Gostaria de modularizar seus sistemas Object Pascal em pequenos executáveis mas não sabe como? Talvez esse artigo possa ajudá-lo.">
    <meta property="og:url" content="http://objectpascalprogramming.com/ipc">
    <meta property="og:site_name" content="Object Pascal Programming">
    
    <meta property="og:image"content="http://objectpascalprogramming.com/images/2017/photo-climate-kic-350836.jpg" >
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary" />
    
        <meta name="twitter:site" content="@mdbs99" />
    
    <meta name="twitter:title" content="Inter-process Communication" />
    <meta name="twitter:description" content="Sacadas sobre Programação Orientada a Objetos e Object Pascal.
" />
    <meta name="twitter:url" content="http://objectpascalprogramming.com/ipc" />

    <!-- Icons -->
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-touch-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-160x160.png" sizes="160x160">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">

    
      
      <script type="text/javascript">
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-72532239-1', 'auto');
        ga('send', 'pageview');
      </script>
      
    
    
    <script type="text/javascript">
      var trackcmp_email = '';
      var trackcmp = document.createElement("script");
      trackcmp.async = true;
      trackcmp.type = 'text/javascript';
      trackcmp.src = '//trackcmp.net/visit?actid=89113404&e='+encodeURIComponent(trackcmp_email)+'&r='+encodeURIComponent(document.referrer)+'&u='+encodeURIComponent(window.location.href);
      var trackcmp_s = document.getElementsByTagName("script");
      if (trackcmp_s.length) {
        trackcmp_s[0].parentNode.appendChild(trackcmp);
      } else {
        var trackcmp_h = document.getElementsByTagName("head");
        trackcmp_h.length && trackcmp_h[0].appendChild(trackcmp);
      }
    </script>
</head>

<body class="site animated fade-in-down">

	

  <div class="site-wrap">
    <header class="site-header px2 px-responsive">
  <div class="mt2 wrap">
    <div class="measure">
      <a href="http://objectpascalprogramming.com" class="site-title">Object Pascal Programming</a><br/>
      <nav class="site-nav">
        <a href="/lista-vip/" target=_blank>E-Book</a>
<a href="/archive/">Arquivo</a>
<a href="/testimonials/">Testemunhos</a>
<a href="/webinars/">Webinários</a>
<a href="/contact/">Contato</a>
<a href="/about/">Sobre</a>

      </nav>
      <div class="clearfix"></div>
      
        <div class="social-icons">
  <div class="social-icons-center">
    
      <a class="fa fa-github" href="https://github.com/mdbs99"></a>
    
    
      <a class="fa fa-gitlab" href="https://gitlab.com/mdbs99"></a>
    
    
      <a class="fa fa-bitbucket" href="https://bitbucket.org/mdbs99"></a>
    
    
      <a class="fa fa-facebook" href="https://www.facebook.com/mdbs99"></a>
    
    
      <a class="fa fa-twitter" href="https://twitter.com/mdbs99"></a>
    
    
      <a class="fa fa-instagram" href="https://www.instagram.com/mdbs99"></a>
    
    
      <a class="fa fa-youtube" href="https://www.youtube.com/c/mdbs99"></a>
    
    
      <a class="fa fa-google-plus" href="https://plus.google.com/+mdbs99/posts"></a>
    
    
      <a class="fa fa-linkedin" href="https://www.linkedin.com/in/mdbs99"></a>
    
    
      <a class="fa fa-medium" href="https://medium.com/@mdbs99"></a>
    
    
      <a class="fa fa-stack-overflow" href="https://stackoverflow.com/users/4330138"></a>
    
    
    
      <a class="fa fa-envelope" href="mailto:opp@delfire.net"></a>
    
    <a class="fa fa-rss" href="/feed.xml"></a>
  </div>
  <div class="right">
    
    
    
  </div>
</div>
<div class="clearfix"></div>

      
      <div id="search" class="social-icons-center">
        <form method="get" action="https://www.google.com/search" style="position:relative">
          <input name="sitesearch" value="objectpascalprogramming.com" type="hidden"/>
          <input id="search-query" class="field field-text"
            onfocus="$('#google').css('display', 'inline-block');"
            name="q" placeholder="Pesquisar" autocomplete="off"/>
          <span class="desktop-only">
            <input type="image" src="/images/google-search-icon.svg" id="google" title="search via Google"
              style="height:2.4em;display:none;position:absolute;top:.3em;margin-left:1em;" alt="search via Google"/>
          </span>
        </form>
        <div id="search-results" style="display: none;">
          <div class="entries"></div>
        </div>
      </div>
    </div>
  </div>
</header>


    <div class="post p2 p-responsive wrap" role="main">
      <div class="measure">
      <!--<hr size="1" width="100%" align="center" noshade>-->
        


<div class="post-header mb2">
  <h1>Inter-process Communication</h1>
  <span class="post-meta">Sep 11, 2017</span><br>
  
  <span class="post-meta small">
  
    3 minute read
  
  </span>
</div>

<article class="post-content">
  <p>Gostaria de modularizar seus sistemas <em>Object Pascal</em> em pequenos executáveis mas não sabe como?</p>

<!--more-->

<p><img src="/images/2017/photo-climate-kic-350836.jpg" alt="Unsplash image" /> 
<span style="font-family: 'Bebas Neue'; font-size: 0.7em;">Photo by Climate KIC on Unsplash</span></p>

<h2 id="introducao">Introdução</h2>

<p>Muitos sistemas começam simples. Uma dúzia de tabelas, alguns cadastros, um formulário de <em>login</em> e poucas <a href="/posts/codigo-duplicado-talvez-nao/#regras-de-negocio">Regras de Negócio</a>.</p>

<p>Com o tempo é necessário ter alguns relatórios, mais cadastros, mais tabelas e muito mais Regras de Negócio.</p>

<p>A complexidade vai aumentando cada vez mais. O que antes era simples, agora é um “monstro” monolítico.</p>

<p>Essa história parece familiar?</p>

<p>Isso já aconteceu comigo — mais de uma vez — e talvez esteja acontecendo com você agora mesmo.</p>

<p>Hoje vou lhe apresentar uma técnica (antiga) para modularizar seus sistemas, facilitando a manutenção e, possivelmente, diminuir a complexidade do código.</p>

<p>Esse artigo irá focar numa dessas técnicas chamada <a href="https://en.wikipedia.org/wiki/Inter-process_communication">Inter-process Communication</a> ou IPC.</p>

<h2 id="ipc">IPC</h2>

<p>Um sistema pode ser modularizado de várias maneiras. Podemos utilizar algumas técnicas como DLL’s, <a href="/posts/pacotes-e-versoes-no-lazarus/"><em>Packages</em></a>, WebServices, <a href="/posts/microservices-delphi-parte-1/">Microservices</a> e algumas outras.</p>

<p>O IPC permite que dois processos (executáveis) distintos se comuniquem entre si através de mensagens que são gerenciadas pelo sistema operacional.</p>

<p>Essa técnica é muito utilizada por sistemas operacionais de microkernel como, por exemplo, o sistema operacional <a href="http://www.minix3.org/">MINIX3</a>.</p>

<p>O objetivo principal é diminuir o número de funcionalidades de um executável monolítico, utilizando um <em>design</em> mas modular, onde haverá uma comunicação entre processos colaborativos ao invés de haver um único processo que faz tudo.</p>

<p>A comunicação por IPC é do tipo cliente/servidor, sendo que cada processo pode ser tanto um como outro ao mesmo tempo.</p>

<p>Então, imagine projetar um sistema onde seus módulos seriam divididos em vários executáveis. Um módulo com as Regras de Negócio, outro de Relatórios para disponibilizá-los tanto na Web quanto no Desktop, outro para <em>login</em>, etc.</p>

<p>Alguns destes módulos seriam executados na mesma máquina e, portanto, seria mais vantajoso se esses executáveis se comunicassem através de mensagens gerenciadas pelo Sistema Operacional ao invés de utilizar uma nova camada de protocolos (REST, SOAP, etc). Para esses casos, podemos utilizar o IPC.</p>

<p>Mas como implementá-lo?</p>

<h2 id="simpleipc">SimpleIPC</h2>

<p>No compilador <a href="https://freepascal.org/"><em>Free Pascal</em></a> existe um <em>package</em> chamado <a href="https://svn.freepascal.org/svn/fpc/branches/fixes_3_0/packages/fcl-process/">fcl-process</a> que implementa o IPC.</p>

<p>Essa implementação foi codificada numa única Unidade chamada <code>simpleipc.pp</code> e é <em>cross-platform</em>, ou seja, um único código que funciona em sistemas <em>Unix-like</em> e <em>Windows</em>.</p>

<p>O próprio <a href="http://www.lazarus-ide.org/"><em>Lazarus</em></a> utiliza o <em>SimpleIPC</em> para fazer a <a href="http://wiki.freepascal.org/Help_protocol">comunicação</a> entre a IDE e o <em>Help Viewer</em>.</p>

<p>Basicamente são duas classes principais a saber:</p>

<ol>
  <li>A classe <a href="http://lazarus-ccr.sourceforge.net/docs/fcl/simpleipc/tsimpleipcclient.html"><code>TSimpleIPCClient</code></a> implementa o envio das mensagens</li>
  <li>A classe <a href="http://lazarus-ccr.sourceforge.net/docs/fcl/simpleipc/tsimpleipcserver.html"><code>TSimpleIPCServer</code></a> implementa o recebimento das mensagens</li>
</ol>

<p>Exemplos de uso de ambas as Classes podem ser visto nos <em>demos</em> disponibilizados no próprio <em>package</em>, <a href="https://svn.freepascal.org/svn/fpc/branches/fixes_3_0/packages/fcl-process/examples/">aqui</a>.</p>

<h2 id="alternativas">Alternativas</h2>

<p>Para aqueles que não utilizam <em>Free Pascal</em>, existe a opção de utilizar a implementação do <em>SimpleIPC</em> no formato de DLL.</p>

<p>O projeto <a href="http://wiki.lazarus.freepascal.org/SimpleIPC_Library"><em>SimpleIPC Library</em></a> encapsula a implementação do <em>Free Pascal</em> numa DLL que pode ser utilizada por praticamente qualquer linguagem.</p>

<p>O código é bastante procedural — padrão em DLL’s — porém pode ser uma alternativa rápida para começar a utilizar essa técnica ao invés de implentá-la do zero.</p>

<p>Considere que mesmo que sua linguagem já implemente tal padrão, talvez ele não seja compatível com outras linguagens. Nesses casos o uso de uma DLL padrão pode fazer sentido.</p>

<p>No Windows o IPC pode ser “traduzido” como uma <em>Windows Message</em> do tipo <code>WM_COPYDATA</code>. Sabemos que é relativamente fácil trabalhar com mensagens do Windows no <em>Object Pascal</em>  então, se o desenvolvimento for apenas para a plataforma Windows, talvez seja mais simples utilizar mensagens do tipo <code>WM_COPYDATA</code>. Esses links <a href="https://www.thoughtco.com/send-information-between-applications-1058476">aqui</a>, <a href="https://stackoverflow.com/questions/7257719/wm-copydata-string-not-appearing-in-target-application">aqui</a> e <a href="https://stackoverflow.com/questions/7540706/wm-copydata-with-and-without-quotes-yields-different-results">aqui</a>, podem ajudar.</p>

<h2 id="conclusao">Conclusão</h2>

<p>Nos anos 60 já existiam tais técnicas de modularização. No entanto, ainda hoje, continuamos a desenvolver softwares monolíticos, pesados e de difícil manutenção.</p>

<p>Como visto nesse artigo, utilizar o IPC pode facilitar a manutenção do código, pois cada subprojeto (executável) iria lidar apenas com poucos <a href="/posts/delegacao-de-implementacao-de-interfaces/#contextos">contextos</a>, possivelmente diminuindo a complexidade.</p>

<p>Cada subprojeto poderia evoluir e ser utilizado independentemente.</p>

<p>Até logo.</p>


</article>


  <div class="share-page">
  Compartilhe

  <div class="share-links">
    
      <a class = "fa fa-facebook" href="https://facebook.com/sharer.php?u=http://objectpascalprogramming.com/ipc" rel="nofollow" target="_blank" title="Share on Facebook"></a>
    

    
      <a class="fa fa-twitter" href="https://twitter.com/intent/tweet?text=Inter-process Communication&via=mdbs99;url=http://objectpascalprogramming.com/ipc" rel="nofollow" target="_blank" title="Share on Twitter"></a>
    

    
      <a class="fa fa-google-plus" href="https://plus.google.com/share?url=http://objectpascalprogramming.com/ipc" rel="nofollow" target="_blank" title="Share on Google+"></a>
    

    
      <a class="fa fa-linkedin" href="http://www.linkedin.com/shareArticle?url=http://objectpascalprogramming.com/ipc&title=Inter-process Communication" rel="nofollow" target="_blank" title="Share on LinkedIn"></a>
    

    

    

    
      <a class="fa fa-reddit" href="http://reddit.com/submit?url=http://objectpascalprogramming.com/ipc&title=Inter-process Communication" rel="nofollow" target="_blank" title="Share on Reddit"></a>
    

    

    
      <a class = "fa fa-hacker-news" onclick="parent.postMessage('submit','*')" href="https://news.ycombinator.com/submitlink?u=http://objectpascalprogramming.com/ipc&t=Inter-process Communication" rel="nofollow" target="_blank" title="Share on Hacker News"></a>
    

    <p />

  </div>
</div>




  <div class="py2 post-footer">
  <hr />
  <a href="/lista-vip/"> <img src="/images/ebook-p.jpg" alt="10 Regras da Orientação a Objetos" /> </a>
  <p>
   Inscreva-se na minha <strong>Lista VIP</strong> e receba um link para o meu <strong>e-Book Gratuito</strong> com as <strong>10 Regras da Programação Orientada a Objetos</strong>,
   após você confirmar seu cadastro. 
   <br/>
  </p>
  <div class="py2">
    <form id="form" class="form-stacked" method="post" action="http://delfire.activehosted.com/proc.php">
      <input type="email" name="email" class="field-light" placeholder="Seu e-mail">
      <input type="hidden" name="f" value="14">
      <input type="hidden" name="s" value="">
      <input type="hidden" name="c" value="0">
      <input type="hidden" name="m" value="0">
      <input type="hidden" name="act" value="sub">
      <input type="hidden" name="nlbox[]" value="1">
      <button type="submit" class="button button-blue button-big mobile-block">Cadastrar</button>
    </form>
  </div>
  </p>
</div>




  <h3 class="related-post-title">Posts Relacionados</h3>
  
    <div class="post ml2">
      <a href="/objetos-complexos" class="post-link">
        <ul>
          <h4 class="post-title"><li>Objetos Complexos</li></h4>
        </ul>
        <!--<p class="post-summary"></p>-->
      </a>
    </div>
  
    <div class="post ml2">
      <a href="/exit-proc" class="post-link">
        <ul>
          <h4 class="post-title"><li>O Procedimento Exit</li></h4>
        </ul>
        <!--<p class="post-summary"></p>-->
      </a>
    </div>
  
    <div class="post ml2">
      <a href="/pas2js" class="post-link">
        <ul>
          <h4 class="post-title"><li>Pas2JS: Codificando em Pascal, Executando em JavaScript</li></h4>
        </ul>
        <!--<p class="post-summary"></p>-->
      </a>
    </div>
  
    <div class="post ml2">
      <a href="/argumentos-const" class="post-link">
        <ul>
          <h4 class="post-title"><li>Mais Performance usando Argumentos "const" para Interfaces</li></h4>
        </ul>
        <!--<p class="post-summary"></p>-->
      </a>
    </div>
  
    <div class="post ml2">
      <a href="/heranca-de-formulario-e-para-iniciantes" class="post-link">
        <ul>
          <h4 class="post-title"><li>Herança de Formulário é para Iniciantes</li></h4>
        </ul>
        <!--<p class="post-summary"></p>-->
      </a>
    </div>
  
    <div class="post ml2">
      <a href="/eliminando-metodos-privados" class="post-link">
        <ul>
          <h4 class="post-title"><li>Eliminando Métodos Privados</li></h4>
        </ul>
        <!--<p class="post-summary"></p>-->
      </a>
    </div>
  
    <div class="post ml2">
      <a href="/classes-aninhadas" class="post-link">
        <ul>
          <h4 class="post-title"><li>Classes Aninhadas</li></h4>
        </ul>
        <!--<p class="post-summary"></p>-->
      </a>
    </div>
  
    <div class="post ml2">
      <a href="/api-unit" class="post-link">
        <ul>
          <h4 class="post-title"><li>API Unit: Tudo num só lugar</li></h4>
        </ul>
        <!--<p class="post-summary"></p>-->
      </a>
    </div>
  
    <div class="post ml2">
      <a href="/injecao-de-dependencia" class="post-link">
        <ul>
          <h4 class="post-title"><li>Injeção de Dependência sem XML, Atributos/Anotações ou Frameworks</li></h4>
        </ul>
        <!--<p class="post-summary"></p>-->
      </a>
    </div>
  
    <div class="post ml2">
      <a href="/nomeando-classes-em-libraries" class="post-link">
        <ul>
          <h4 class="post-title"><li>Nomeando Classes em Libraries</li></h4>
        </ul>
        <!--<p class="post-summary"></p>-->
      </a>
    </div>
  



  
    <div id="disqus_thread"></div>
    <script type="text/javascript">
      var disqus_shortname  = 'objectpascalprogramming';
      var disqus_identifier = '/ipc';
      var disqus_title      = 'Inter-process Communication';
      (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  




      </div>
    </div>
  </div>

    <footer class="center">
  <div class="measure">
    <small>
      <strong>Object Pascal Programming</strong> by <a href="/about/">Marcos Douglas</a>
      <p/>
      Theme by <a href="http://johnotander.com">John Otander</a>
      <br>
    </small>
  </div>
</footer>

</body>
</html>
