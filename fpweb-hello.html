<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Construindo uma Aplicação Básica com fpWeb &#8211; Object Pascal Programming</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Sacadas sobre Programação Orientada a Objetos e Object Pascal.
">
    <meta name="author" content="Marcos Douglas B. Santos">
    <meta name="keywords" content="pascal, object pascal, delphi, freepascal, fpc, lazarus, marcos douglas blog, orientação a objetos, object oriented, oop, poo, software development blog, programming blog, quality of software, software blog, high quality programming">
    <meta name="keywords" content="">
    <meta name="keywords" content="freepascal, fpc, delphi, lazarus, pascal, object pascal, object-oriented, oop, mdbs99, fpweb, web, web development">
    <link rel="canonical" href="http://objectpascalprogramming.com/fpweb-hello">
    <link rel="alternate" type="application/rss+xml" title="RSS Feed for Object Pascal Programming" href="/feed.xml" />

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/pixyll.css?201903180320" type="text/css">

    <!-- Fonts -->
    <link href='//fonts.googleapis.com/css?family=Merriweather:900,900italic,300,300italic' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Lato:900,300' rel='stylesheet' type='text/css'>
    
      <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    

    <!-- Verifications -->
    

    <!-- Open Graph -->
    <!-- From: https://github.com/mmistakes/hpstr-jekyll-theme/blob/master/_includes/head.html -->
    <meta property="og:locale" content="pt_BR">
    <meta property="og:type" content="article">
    <meta property="og:title" content="Construindo uma Aplicação Básica com fpWeb">
    <meta property="og:description" content="As vezes, tudo que precisamos é uma aplicação &quot;Alô Mundo&quot;.">
    <meta property="og:url" content="http://objectpascalprogramming.com/fpweb-hello">
    <meta property="og:site_name" content="Object Pascal Programming">
    
    <meta property="og:image"content="http://objectpascalprogramming.com/images/2018/photo-rawpixel-296622-unsplash.jpg" >
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary" />
    
        <meta name="twitter:site" content="@mdbs99" />
    
    <meta name="twitter:title" content="Construindo uma Aplicação Básica com fpWeb" />
    <meta name="twitter:description" content="Sacadas sobre Programação Orientada a Objetos e Object Pascal.
" />
    <meta name="twitter:url" content="http://objectpascalprogramming.com/fpweb-hello" />

    <!-- Icons -->
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-touch-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-160x160.png" sizes="160x160">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">

    
      
      <script type="text/javascript">
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-72532239-1', 'auto');
        ga('send', 'pageview');
      </script>
      
    
    
    <script type="text/javascript">
      var trackcmp_email = '';
      var trackcmp = document.createElement("script");
      trackcmp.async = true;
      trackcmp.type = 'text/javascript';
      trackcmp.src = '//trackcmp.net/visit?actid=89113404&e='+encodeURIComponent(trackcmp_email)+'&r='+encodeURIComponent(document.referrer)+'&u='+encodeURIComponent(window.location.href);
      var trackcmp_s = document.getElementsByTagName("script");
      if (trackcmp_s.length) {
        trackcmp_s[0].parentNode.appendChild(trackcmp);
      } else {
        var trackcmp_h = document.getElementsByTagName("head");
        trackcmp_h.length && trackcmp_h[0].appendChild(trackcmp);
      }
    </script>
</head>

<body class="site animated fade-in-down">

	

  <div class="site-wrap">
    <header class="site-header px2 px-responsive">
  <div class="mt2 wrap">
    <div class="measure">
      <a href="http://objectpascalprogramming.com" class="site-title">Object Pascal Programming</a><br/>
      <nav class="site-nav">
        <a href="/lista-vip/" target=_blank>E-Book</a>
<a href="/archive/">Arquivo</a>
<a href="/testimonials/">Testemunhos</a>
<a href="/contact/">Contato</a>
<a href="/about/">Sobre</a>

      </nav>
      <div class="clearfix"></div>
      
        <div class="social-icons">
  <div class="social-icons-center">
    
      <a class="fa fa-github" href="https://github.com/mdbs99"></a>
    
    
      <a class="fa fa-gitlab" href="https://gitlab.com/mdbs99"></a>
    
    
      <a class="fa fa-bitbucket" href="https://bitbucket.org/mdbs99"></a>
    
    
      <a class="fa fa-facebook" href="https://www.facebook.com/mdbs99"></a>
    
    
      <a class="fa fa-twitter" href="https://twitter.com/mdbs99"></a>
    
    
      <a class="fa fa-instagram" href="https://www.instagram.com/mdbs99"></a>
    
    
      <a class="fa fa-youtube" href="https://www.youtube.com/c/mdbs99"></a>
    
    
      <a class="fa fa-google-plus" href="https://plus.google.com/+mdbs99/posts"></a>
    
    
      <a class="fa fa-linkedin" href="https://www.linkedin.com/in/mdbs99"></a>
    
    
      <a class="fa fa-medium" href="https://medium.com/@mdbs99"></a>
    
    
      <a class="fa fa-stack-overflow" href="https://stackoverflow.com/users/4330138"></a>
    
    
    
      <a class="fa fa-envelope" href="mailto:opp@delfire.net"></a>
    
    <a class="fa fa-rss" href="/feed.xml"></a>
  </div>
  <div class="right">
    
    
    
  </div>
</div>
<div class="clearfix"></div>

            
      <div id="search" class="social-icons-center">
        <form method="get" action="https://www.google.com/search" style="position:relative">
          <input name="sitesearch" value="objectpascalprogramming.com" type="hidden"/>
          <input id="search-query" class="field field-text"
            onfocus="$('#google').css('display', 'inline-block');"
            name="q" placeholder="Pesquisar" autocomplete="off"/>
          <span class="desktop-only">
            <input type="image" src="/images/google-search-icon.svg" id="google" title="search via Google"
              style="height:2.4em;display:none;position:absolute;top:.3em;margin-left:1em;" alt="search via Google"/>
          </span>
        </form>
        <div id="search-results" style="display: none;">
          <div class="entries"></div>
        </div>
      </div>
    </div>
  </div>
</header>


    <div class="post p2 p-responsive wrap" role="main">
      <div class="measure">
      <!--<hr size="1" width="100%" align="center" noshade>-->
        


<div class="post-header mb2">
  <h1>Construindo uma Aplicação Básica com fpWeb</h1>
  <span class="post-meta">Jun 4, 2018</span><br>
  
  <span class="post-meta small">
  
    4 minute read
  
  </span>
</div>

<article class="post-content">
  <p>As vezes, tudo que precisamos é uma aplicação “Alô Mundo”.</p>

<!--more-->

<p><img src="/images/2018/photo-rawpixel-296622-unsplash.jpg" alt="Unsplash image" />
<span style="font-family: 'Bebas Neue'; font-size: 0.7em;">Photo by rawpixel on Unsplash</span></p>

<h2 id="introducao">Introdução</h2>

<p>Neste artigo você verá como preparar seu ambiente Lazarus para o desenvolvimento Web com fpWeb.</p>

<p>Eu estou utilizando a versão mais atual e revisada do Lazarus 1.8.5,  <a href="https://svn.freepascal.org/svn/lazarus/branches/fixes_1_8">fixes_1_8</a>, revisão 58049.</p>

<p>Para o compilador, também estou utilizando a versão mais atual e revisada do FPC 3.0.5, <a href="https://svn.freepascal.org/svn/fpc/branches/fixes_3_0">fixes_3_0</a>, revisão 38970.</p>

<p>O artigo presume que você já tem o FPC e Lazarus instalados e funcionando no seu computador.</p>

<h2 id="instalando">Instalando fpWeb</h2>

<p>A primeira instalação a ser realizada será a do pacote <code>lazwebextra</code>. Esse pacote adiciona opções para a criação de novos projetos do tipo Web como CGI Application, FastCGI Application e outros.</p>

<p>Esse pacote não é obrigatório, mas facilita a criação de novos projetos. No entanto, se você não quiser instalá-lo, ainda poderá criar uma aplicação console simples e ir alterando manualmente o código conforme for lendo o artigo.</p>

<p>Para prosseguir com a instalação, abra o menu <code>Package&gt;Install/Uninstall Packages</code> e localize o pacote <code>lazwebextra</code> no box “Available for installation”.</p>

<p>Na figura abaixo, o pacote é mostrado no box esquerdo, pois já foi instalado no meu computador.</p>

<p><img src="/images/2018/laz-install-lazwebextra.jpg" alt="Install/Uninstall Packages" /></p>

<p>Clique em “Save e Rebuild IDE”.</p>

<p>Se tudo deu certo, você poderá seguir para o próximo passo, ou seja, o início da construção de um sistema Web simples.</p>

<h2 id="desenvolvimento">Desenvolvimento</h2>

<p>Após a instalação do pacote de integração com a IDE, você estará habilitado a construir aplicativos Web utilizando o fpWeb framework.</p>

<p>Abra o menu <code>File&gt;New</code> e escolha a opção “FastCGI Application”.</p>

<p>Apesar de escolhermos essa opção, não iremos criar uma aplicação FastCGI que precisará ser executada em algum servidor Web como Apache ou Microsoft IIS. Ao invés disso, iremos criar um executável Standalone que irá responder as requisições do browser sem a necessidade de existir um servidor.</p>

<p>Após clicar nessa opção, um novo projeto será criado.</p>

<p>Infelizmente, nessa versão do Lazarus eles ainda mantém a versão antiga do fpWeb como padrão, ou seja, aquela baseada no modelo Web Broker. No entanto, queremos utilizar a <a href="/fpweb">nova</a> versão e para isso precisaremos fazer algumas modificações manuais.</p>

<p>Feche a <code>Unit1</code> sem salvar e remova-a do projeto (<code>lpr</code>). Salve o projeto, escolhendo um nome — eu digitei <code>hello.lpr</code>.</p>

<pre><code>program hello;

{$mode objfpc}{$H+}

uses
 fpFCGI;

begin
  Application.Title := 'Hello World';
  { Uncomment the port setting here if you want to run the
    FastCGI application stand-alone (e.g. for NGINX) }
  // Application.Port:=2015; // For example
  Application.Initialize;
  Application.Run;
end.
</code></pre>

<p>Por enquanto esse é todo o projeto. Ele ainda não faz nada de útil. É necessário criar alguma rota que execute alguma ação.</p>

<p>Como iremos criar uma aplicação Standalone, precisaremos substituir a seção <code>uses</code> com outras unidades e também definir a porta de acesso que estará em execução quando acessarmos <code>localhost</code>:</p>

<pre><code>program hello;

{$mode objfpc}{$H+}

uses
  SysUtils, httpdefs, httproute, fphttpapp;

begin
  Application.Title := 'Hello World';
  Application.Port := 8080;
  Application.Initialize;
  Application.Run;
end.
</code></pre>

<p>As duas unidades mais importantes são <code>httproute</code>, que define os objetos relacionados às rotas e <code>fphttpapp</code>, que substitui o tipo de projeto de FastCGI para Standalone.</p>

<p>Feito isso é necessário definir ao menos uma rota para executar alguma ação.</p>

<p>A maneira mais fácil é implementar uma nova classe, tendo como base a <code>TRouteObject</code>, padrão do fpWeb. Essa nova classe deverá sobrescrever o método <code>HandleRequest</code> e retornar algo como resposta.</p>

<p>Vamos criar uma nova classe chamada <code>THelloRoute</code>, implementando o método <code>HandleRequest</code> da forma mais simples possível. Depois, é necessário registrar essa rota em algum lugar, antes da aplicação realmente iniciar — você poderá utilizar as seções <code>initialization</code> de cada nova unidade que você criar, porém aqui, para manter simples, basta registrar a rota antes de <code>Application.Run</code>.</p>

<p>Abaixo pode-se ver o programa completo:</p>

<pre><code>program hello;

{$mode objfpc}{$H+}

uses
  SysUtils, httpdefs, httproute, fphttpapp;

type
  THelloRoute = class(TRouteObject)
  public
    procedure HandleRequest(
      ARequest: TRequest; AResponse: TResponse); override;
  end;

{ THelloRoute }

procedure THelloRoute.HandleRequest(
  ARequest: TRequest; AResponse: TResponse);
begin
  AResponse.Content := 'Hello!';
  AResponse.SendResponse;
end;

begin
  HTTPRouter.RegisterRoute('/hello', rmAll, THelloRoute);
  Application.Title := 'Hello World';
  Application.Port := 8080;
  Application.Initialize;
  Application.Run;
end.
</code></pre>

<p>Agora execute a aplicação diretamente pela IDE.</p>

<p>Depois, abra algum browser se sua preferência e digite: <a href="http://localhost:8080/hello">http://localhost:8080/hello</a></p>

<p>Se tudo deu certo, você estará vendo “Hello!” como resposta.</p>

<h2 id="conclusao">Conclusão</h2>

<p>Esse artigo mostrou como criar uma aplicação Web simples que pode ser executada e testada sem a necessidade de um servidor Web.</p>

<p>Tenha em mente que “todo esse trabalho” só será feito uma vez. Após criar um projeto de “template”, bastará copiar/colar e renomear o projeto. Todo o restante do trabalho será criando novas unidades e rotas relacionadas às suas regras de negócio.</p>

<p>Até a data de publicação desse artigo não havia documentação sobre esse novo estilo de desenvolvimento utilizando o fpWeb framework. Então, talvez esse seja um dos primeiros artigos a explicar essa nova tecnologia.</p>

<p>Espero que você tenha ficado motivado a pesquisar mais a respeito sobre desenvolvimento Web com Free Pascal e Lazarus.</p>

<p>Até logo.</p>

</article>


  <div class="share-page">
  Compartilhe

  <div class="share-links">
    
      <a class = "fa fa-facebook" href="https://facebook.com/sharer.php?u=http://objectpascalprogramming.com/fpweb-hello" rel="nofollow" target="_blank" title="Share on Facebook"></a>
    

    
      <a class="fa fa-twitter" href="https://twitter.com/intent/tweet?text=Construindo uma Aplicação Básica com fpWeb&via=mdbs99;url=http://objectpascalprogramming.com/fpweb-hello" rel="nofollow" target="_blank" title="Share on Twitter"></a>
    

    
      <a class="fa fa-google-plus" href="https://plus.google.com/share?url=http://objectpascalprogramming.com/fpweb-hello" rel="nofollow" target="_blank" title="Share on Google+"></a>
    

    
      <a class="fa fa-linkedin" href="http://www.linkedin.com/shareArticle?url=http://objectpascalprogramming.com/fpweb-hello&title=Construindo uma Aplicação Básica com fpWeb" rel="nofollow" target="_blank" title="Share on LinkedIn"></a>
    

    

    

    
      <a class="fa fa-reddit" href="http://reddit.com/submit?url=http://objectpascalprogramming.com/fpweb-hello&title=Construindo uma Aplicação Básica com fpWeb" rel="nofollow" target="_blank" title="Share on Reddit"></a>
    

    

    
      <a class = "fa fa-hacker-news" onclick="parent.postMessage('submit','*')" href="https://news.ycombinator.com/submitlink?u=http://objectpascalprogramming.com/fpweb-hello&t=Construindo uma Aplicação Básica com fpWeb" rel="nofollow" target="_blank" title="Share on Hacker News"></a>
    

    <p />

  </div>
</div>




  <div class="py2 post-footer">
  <hr />
  <a href="/lista-vip/"> <img src="/images/ebook-p.jpg" alt="10 Regras da Orientação a Objetos" /> </a>
  <p>
   Inscreva-se na minha <strong>Lista VIP</strong> e receba um link para o meu <strong>e-Book Gratuito</strong> com as <strong>10 Regras da Programação Orientada a Objetos</strong>,
   após você confirmar seu cadastro. 
   <br/>
  </p>
  <div class="py2">
    <form id="form" class="form-stacked" method="post" action="http://delfire.activehosted.com/proc.php">
      <input type="email" name="email" class="field-light" placeholder="Seu e-mail">
      <input type="hidden" name="f" value="14">
      <input type="hidden" name="s" value="">
      <input type="hidden" name="c" value="0">
      <input type="hidden" name="m" value="0">
      <input type="hidden" name="act" value="sub">
      <input type="hidden" name="nlbox[]" value="1">
      <button type="submit" class="button button-blue button-big mobile-block">Cadastrar</button>
    </form>
  </div>
  </p>

Gostaria de me pagar um café?  
<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
<input type="hidden" name="cmd" value="_s-xclick">
<input type="hidden" name="hosted_button_id" value="WQ9SBWT3CM2SC">
<input type="image" src="https://www.paypalobjects.com/pt_BR/i/btn/btn_donate_SM.gif" border="0" name="submit" alt="PayPal - A maneira fácil e segura de enviar pagamentos online!">
<img alt="" border="0" src="https://www.paypalobjects.com/pt_BR/i/scr/pixel.gif" width="1" height="1">
</form>
  
</div>




  <h3 class="related-post-title">Posts Relacionados</h3>
  
    <div class="post ml2">
      <a href="/tipo-object-vivo" class="post-link">
        <ul>
          <h4 class="post-title"><li>Tipo object Continua Vivo</li></h4>
        </ul>
        <!--<p class="post-summary"></p>-->
      </a>
    </div>
  
    <div class="post ml2">
      <a href="/array-de-objetos" class="post-link">
        <ul>
          <h4 class="post-title"><li>Array de Objetos</li></h4>
        </ul>
        <!--<p class="post-summary"></p>-->
      </a>
    </div>
  
    <div class="post ml2">
      <a href="/variaveis-locais" class="post-link">
        <ul>
          <h4 class="post-title"><li>Variáveis Locais Deveriam ter Nomes Curtos</li></h4>
        </ul>
        <!--<p class="post-summary"></p>-->
      </a>
    </div>
  
    <div class="post ml2">
      <a href="/formularios-e-widgets" class="post-link">
        <ul>
          <h4 class="post-title"><li>Como Dividir e Organizar o Código em Formulários com Muitos Widgets</li></h4>
        </ul>
        <!--<p class="post-summary"></p>-->
      </a>
    </div>
  
    <div class="post ml2">
      <a href="/pascal-deveria-ser-modernizado" class="post-link">
        <ul>
          <h4 class="post-title"><li>Pascal Deveria ser Modernizado?</li></h4>
        </ul>
        <!--<p class="post-summary"></p>-->
      </a>
    </div>
  
    <div class="post ml2">
      <a href="/records-antiga-nova-tecnologia" class="post-link">
        <ul>
          <h4 class="post-title"><li>Records - Antiga Nova Tecnologia</li></h4>
        </ul>
        <!--<p class="post-summary"></p>-->
      </a>
    </div>
  
    <div class="post ml2">
      <a href="/builder-classes-simplificado" class="post-link">
        <ul>
          <h4 class="post-title"><li>Builder Classes Simplificado</li></h4>
        </ul>
        <!--<p class="post-summary"></p>-->
      </a>
    </div>
  
    <div class="post ml2">
      <a href="/metodo-ref" class="post-link">
        <ul>
          <h4 class="post-title"><li>Como Transformar uma Instância de Classe em Instância de Interface</li></h4>
        </ul>
        <!--<p class="post-summary"></p>-->
      </a>
    </div>
  
    <div class="post ml2">
      <a href="/interfaces-e-casting" class="post-link">
        <ul>
          <h4 class="post-title"><li>Interfaces e Casting</li></h4>
        </ul>
        <!--<p class="post-summary"></p>-->
      </a>
    </div>
  
    <div class="post ml2">
      <a href="/libraries-sem-pacotes" class="post-link">
        <ul>
          <h4 class="post-title"><li>Como Trabalhar com Libraries sem Pacotes</li></h4>
        </ul>
        <!--<p class="post-summary"></p>-->
      </a>
    </div>
  



  
    <div id="disqus_thread"></div>
    <script type="text/javascript">
      var disqus_shortname  = 'objectpascalprogramming';
      var disqus_identifier = '/fpweb-hello';
      var disqus_title      = 'Construindo uma Aplicação Básica com fpWeb';
      (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  




      </div>
    </div>
  </div>

    <footer class="center">
  <div class="measure">
    <small>
      <strong>Object Pascal Programming</strong> by <a href="/about/">Marcos Douglas</a>
      <p/>
      Theme by <a href="http://johnotander.com">John Otander</a>
      <br>
    </small>
  </div>
</footer>

</body>
</html>
